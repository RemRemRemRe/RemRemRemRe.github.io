<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="My Understanding of the Unreal Animation Framework in 5.6" />
<meta property="og:locale" content="en" />
<meta name="description" content="About two months ago, the technical demonstration of The Witcher 4 at Unreal Fest showcased the next-generation animation system of the Unreal Engine (Unreal Animation Framework, hereafter referred to as UAF, while the previous animation blueprint system will be referred to as ABP). This sparked my strong curiosity, and I felt it was time to dive into understanding this system." />
<meta property="og:description" content="About two months ago, the technical demonstration of The Witcher 4 at Unreal Fest showcased the next-generation animation system of the Unreal Engine (Unreal Animation Framework, hereafter referred to as UAF, while the previous animation blueprint system will be referred to as ABP). This sparked my strong curiosity, and I felt it was time to dive into understanding this system." />
<link rel="canonical" href="https://remremremre.github.io/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/" />
<meta property="og:url" content="https://remremremre.github.io/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/" />
<meta property="og:site_name" content="RemRemRemRe" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-08-05T01:50:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="My Understanding of the Unreal Animation Framework in 5.6" />
<meta name="twitter:site" content="@_RemRemRemRe_" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-08-05T01:50:00+08:00","datePublished":"2025-08-05T01:50:00+08:00","description":"About two months ago, the technical demonstration of The Witcher 4 at Unreal Fest showcased the next-generation animation system of the Unreal Engine (Unreal Animation Framework, hereafter referred to as UAF, while the previous animation blueprint system will be referred to as ABP). This sparked my strong curiosity, and I felt it was time to dive into understanding this system.","headline":"My Understanding of the Unreal Animation Framework in 5.6","mainEntityOfPage":{"@type":"WebPage","@id":"https://remremremre.github.io/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/"},"url":"https://remremremre.github.io/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/"}</script>
<!-- End Jekyll SEO tag -->


  <title>My Understanding of the Unreal Animation Framework in 5.6 | RemRemRemRe
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">



  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/favicons/android-chrome-512x512.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">RemRemRemRe</a>
    <p class="site-subtitle fst-italic mb-0">Have a nice Day :)</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/RemRemRemRe"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/_RemRemRemRe_"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['RemUnrealPlugins','outlook.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">

    <!-- jekyll-polyglot will process ferh= into href= through the static_href liquid block tag without relativizing the url; useful for making language navigation switchers  -->
    
  <a style="font-weight: bold;" href="/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/" >en</a> 
  <a  href="/zh/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/" >zh</a>

  </div>
  <!-- language-switcher -->

</div>
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>My Understanding of the Unreal Animation Framework in 5.6</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    

    
  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>My Understanding of the Unreal Animation Framework in 5.6</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1754329800"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Aug  5, 2025
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/_RemRemRemRe_">RemRemRemRe</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2757 words"
>
  <em>15 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">My Understanding of the Unreal Animation Framework in 5.6</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">My Understanding of the Unreal Animation Framework in 5.6</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <p>About two months ago, the technical demonstration of The Witcher 4 at Unreal Fest showcased the next-generation animation system of the Unreal Engine (Unreal Animation Framework, hereafter referred to as UAF, while the previous animation blueprint system will be referred to as ABP). This sparked my strong curiosity, and I felt it was time to dive into understanding this system.</p>

<p>This article will analyze the system from a architecture perspective, primarily introducing its components, the meanings of various types, and their logical relationships. I hope this will help everyone grasp and get started with this new animation system, but it will not cover details such as animation blending calculations or animation retargeting.</p>

<h1 id="simple-demo">Simple demo</h1>

<p>Let’s start with a simple demo:</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAF_vs_ABP.gif" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAF_vs_ABP.gif" alt="UAF vs ABP" loading="lazy"></a></p>

<p>The video shows a simple layered blending effect, with the upper body coming from the <code class="language-plaintext highlighter-rouge">static frame of the bow drawing animation</code> and the lower body using a <code class="language-plaintext highlighter-rouge">looping sprint animation</code>.</p>

<p><code class="language-plaintext highlighter-rouge">BlendMask</code> utilizes a <code class="language-plaintext highlighter-rouge">HierarchyTable</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/HierarchyTable.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/HierarchyTable.png" alt="HierarchyTable" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>It is a general-purpose hierarchical data container, used here as <code class="language-plaintext highlighter-rouge">BlendProfile</code></p>
</blockquote>

<p>From the left view, it’s clear that the two models completely overlap, and the animation effects are identical:</p>

<p><a href="/assets/img/UnrealAnimationFramework/LeftView.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/LeftView.png" alt="Left View" loading="lazy"></a></p>

<p>This is because both are running the same <code class="language-plaintext highlighter-rouge">animation graph of UAF</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAF_Graph_LayerBlend.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAF_Graph_LayerBlend.png" alt="UAF Graph LayerBlend" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>The upper left is the <code class="language-plaintext highlighter-rouge">lower body</code> animation, the lower left is the <code class="language-plaintext highlighter-rouge">upper body</code> animation, and the right is the <code class="language-plaintext highlighter-rouge">layered blending</code></p>
</blockquote>

<p>The difference is that the animation graph on the left is updated using the UAF framework:</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAF_Module_PrePhysics.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAF_Module_PrePhysics.png" alt="UAF Module PrePhysics" loading="lazy"></a></p>

<blockquote class="prompt-info">
  <p>These nodes here may not be the optimal implementation, but they are sufficient for simple demonstration</p>
</blockquote>

<p>while on the right side, the animation graph is updated using ABP :</p>

<p><a href="/assets/img/UnrealAnimationFramework/ABP_Graph.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/ABP_Graph.png" alt="ABP Graph" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>animation graph of UAF can be integrated into animation blueprints through this special animation node</p>
</blockquote>

<h2 id="unified-workspace-interface"><span class="me-2">Unified Workspace Interface</span><a href="#unified-workspace-interface" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>UAF has integrated the <code class="language-plaintext highlighter-rouge">Workspace Editor</code>, providing a unified view of multiple assets.<br />
The workspace itself also has a corresponding asset, classified as <code class="language-plaintext highlighter-rouge">UAF Workspace</code>, which <code class="language-plaintext highlighter-rouge">should</code> be used to store metadata related to the workspace.</p>

<blockquote class="prompt-tip">
  <p>The <code class="language-plaintext highlighter-rouge">Workspace Editor</code> module comes from the new experimental plugin <code class="language-plaintext highlighter-rouge">Workspace</code>, which allows multiple assets to be edited in a unified interface.</p>

  <p>UAF has integrated this feature, which specifies that UAF-related asset types can be edited in the same workspace.</p>

  <p>See：<code class="language-plaintext highlighter-rouge">UAnimNextWorkspaceSchema</code>, <code class="language-plaintext highlighter-rouge">IWorkspaceEditorModule::RegisterObjectDocumentType</code></p>
</blockquote>

<p>The <code class="language-plaintext highlighter-rouge">workspace</code> tab in the upper left corner lists the assets opened in the current workspace:</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAF_Module_PrePhysics.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAF_Module_PrePhysics.png" alt="UAF Module PrePhysics" loading="lazy"></a></p>

<p>Namely, <code class="language-plaintext highlighter-rouge">AG_SequencePlayer</code>, <code class="language-plaintext highlighter-rouge">UAFM_Module</code>, and the workspace’s own asset: <code class="language-plaintext highlighter-rouge">UAFW_Workspace</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/Workspace.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/Workspace.png" alt="Workspace" loading="lazy"></a></p>

<h2 id="system-composition"><span class="me-2">System Composition</span><a href="#system-composition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<blockquote class="prompt-tip">
  <p>These raw cpp types bellow are basically located in the <code class="language-plaintext highlighter-rouge">UE::AnimNext</code> namespace</p>
</blockquote>

<p>The logical carriers of UAF currently consist of two main components: <code class="language-plaintext highlighter-rouge">Module</code> and <code class="language-plaintext highlighter-rouge">AnimationGraph</code>, both running within <code class="language-plaintext highlighter-rouge">RigVM</code>, supporting <code class="language-plaintext highlighter-rouge">multithreaded</code> execution.</p>

<p><a href="/assets/img/UnrealAnimationFramework/AnimNextDataInterface.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/AnimNextDataInterface.png" alt="AnimNextDataInterface" loading="lazy"></a></p>

<p><a href="/assets/img/UnrealAnimationFramework/AnimNextRigVMAsset.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/AnimNextRigVMAsset.png" alt="AnimNextRigVMAsset" loading="lazy"></a></p>

<p>Data exchange between threads is accomplished through <code class="language-plaintext highlighter-rouge">UAnimNextComponent::PublicVariablesProxy</code>.</p>

<p>The comment in <code class="language-plaintext highlighter-rouge">FAnimNextPublicVariablesProxy</code> mentions that currently, it copies dirty-marked data every frame, with plans to change it to a <code class="language-plaintext highlighter-rouge">double-buffered array</code> in the future (refer to <code class="language-plaintext highlighter-rouge">USkinnedMeshComponent::ComponentSpaceTransformsArray</code>).</p>

<blockquote class="prompt-tip">
  <p>See：</p>

  <p><code class="language-plaintext highlighter-rouge">FAnimNextModuleInstance::CopyProxyVariables</code></p>

  <p><code class="language-plaintext highlighter-rouge">IAnimNextVariableProxyHost::FlipPublicVariablesProxy</code></p>

  <p><code class="language-plaintext highlighter-rouge">UAnimNextComponent::SetVariable</code></p>

  <p><code class="language-plaintext highlighter-rouge">UAnimNextComponentWorldSubsystem::Register</code></p>
</blockquote>

<h1 id="module">Module</h1>

<p>The <code class="language-plaintext highlighter-rouge">module</code> here is where various <code class="language-plaintext highlighter-rouge">functions</code> are used to write <code class="language-plaintext highlighter-rouge">logical business</code>, similar to the <code class="language-plaintext highlighter-rouge">blueprint section</code> in ABP / <code class="language-plaintext highlighter-rouge">UAnimInstance::NativeUpdateAnimation</code>, <code class="language-plaintext highlighter-rouge">UAnimInstance::NativeThreadSafeUpdateAnimation</code>, but more powerful and flexible.</p>

<p><code class="language-plaintext highlighter-rouge">FRigUnit_AnimNextModuleEventBase</code>：</p>

<p><a href="/assets/img/UnrealAnimationFramework/AnimNextModuleEventBase.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/AnimNextModuleEventBase.png" alt="AnimNextModuleEventBase" loading="lazy"></a></p>

<p>Through the interface provided by the base class, each <code class="language-plaintext highlighter-rouge">module</code> can choose whether it needs an independent <code class="language-plaintext highlighter-rouge">TickFunction</code>, which <code class="language-plaintext highlighter-rouge">Tick Group</code> to run in, whether to operate on the <code class="language-plaintext highlighter-rouge">game thread</code>, and other functionalities.</p>

<p>The UAF compiler will also automatically generate some <code class="language-plaintext highlighter-rouge">modules</code>, such as variable binding-related <code class="language-plaintext highlighter-rouge">FRigUnit_AnimNextExecuteBindings_GT</code> and <code class="language-plaintext highlighter-rouge">FRigUnit_AnimNextExecuteBindings_WT</code>.</p>

<h1 id="animationgraph">AnimationGraph</h1>

<p>The <code class="language-plaintext highlighter-rouge">animation graph</code> is a collection of <code class="language-plaintext highlighter-rouge">animation logic</code> and its <code class="language-plaintext highlighter-rouge">data</code>, similar to the <code class="language-plaintext highlighter-rouge">animation tree</code> in ABP.</p>

<p>The difference is that in UAF, there are no longer various <code class="language-plaintext highlighter-rouge">animation nodes</code>; instead, there is a <code class="language-plaintext highlighter-rouge">TraitStack</code> node combined with various <code class="language-plaintext highlighter-rouge">Trait</code> combinations.</p>

<p>The animation graph itself acts as a <code class="language-plaintext highlighter-rouge">UObject</code>, also holding references to <code class="language-plaintext highlighter-rouge">UObject</code> references that referenced by <code class="language-plaintext highlighter-rouge">shared data</code> within the graph, preventing them from being garbage collected.</p>

<blockquote class="prompt-tip">
  <p>See：</p>

  <p><code class="language-plaintext highlighter-rouge">UAnimNextAnimationGraph::GraphReferencedObjects</code></p>

  <p><code class="language-plaintext highlighter-rouge">UAnimNextAnimationGraph::GraphReferencedSoftObjects</code></p>
</blockquote>

<p>Additionally, animated charts can have <code class="language-plaintext highlighter-rouge">multiple entries</code>, not just <code class="language-plaintext highlighter-rouge">Root</code></p>

<h2 id="traitstack-and-traitstack-node"><span class="me-2">TraitStack and TraitStack Node</span><a href="#traitstack-and-traitstack-node" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p><code class="language-plaintext highlighter-rouge">TraitStack</code>: As the name suggests, this is a <code class="language-plaintext highlighter-rouge">stack</code> structure composed of <code class="language-plaintext highlighter-rouge">Traits</code>, which includes <code class="language-plaintext highlighter-rouge">1</code> <code class="language-plaintext highlighter-rouge">base trait</code> and several <code class="language-plaintext highlighter-rouge">additive traits</code>.</p>

<p>The corresponding <code class="language-plaintext highlighter-rouge">node</code> is simply a standard <code class="language-plaintext highlighter-rouge">RigUnit</code> node (struct):</p>

<p><a href="/assets/img/UnrealAnimationFramework/TraitStackNode.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/TraitStackNode.png" alt="Trait Stack Node" loading="lazy"></a></p>

<p>A TraitStack node can contain <code class="language-plaintext highlighter-rouge">one or more</code> TraitStacks.</p>

<p>In the editor, it appears as shown in the layered blending animation graph above.</p>

<blockquote class="prompt-tip">
  <p>The node form is just for the convenience of <code class="language-plaintext highlighter-rouge">visualization</code> in the editor. After <code class="language-plaintext highlighter-rouge">compiling</code>, the corresponding <code class="language-plaintext highlighter-rouge">TraitStack</code> will be serialized into the animation graph. This <code class="language-plaintext highlighter-rouge">RigUnit</code> node will not be executed</p>
</blockquote>

<h2 id="trait"><span class="me-2">Trait</span><a href="#trait" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>“trait” or feature, it refers to reusable functionalities in animation logic, similar to <code class="language-plaintext highlighter-rouge">animation nodes</code> in ABP, but again, more powerful and flexible.</p>

<h3 id="ftrait"><span class="me-2">FTrait</span><a href="#ftrait" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><code class="language-plaintext highlighter-rouge">FTrait</code> is the base class for all <code class="language-plaintext highlighter-rouge">Traits</code>, defining the necessary basic interface, such as obtaining its <code class="language-plaintext highlighter-rouge">unique ID</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/FTrait.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FTrait.png" alt="FTrait" loading="lazy"></a></p>

<p>Derived traits are composed of <code class="language-plaintext highlighter-rouge">FBaseTrait</code> or <code class="language-plaintext highlighter-rouge">FAdditiveTrait</code> along with the <code class="language-plaintext highlighter-rouge">derived interface class</code> of <code class="language-plaintext highlighter-rouge">ITraitInterface</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/BaseAdditiveTrait.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/BaseAdditiveTrait.png" alt="Base and Additive Trait" loading="lazy"></a></p>

<p><a href="/assets/img/UnrealAnimationFramework/TraitHierarchy.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/TraitHierarchy.png" alt="TraitHierarchy" loading="lazy"></a></p>

<p><code class="language-plaintext highlighter-rouge">ITraitInterface</code> is the base class for all <code class="language-plaintext highlighter-rouge">trait interfaces</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/ITraitInterface.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/ITraitInterface.png" alt="ITraitInterface" loading="lazy"></a></p>

<p>It contains only one method for <code class="language-plaintext highlighter-rouge">getting UID</code>, meaning each <code class="language-plaintext highlighter-rouge">trait interface</code> also has a <code class="language-plaintext highlighter-rouge">unique ID</code>.</p>

<p>Currently, these two unique IDs are derived by applying the <code class="language-plaintext highlighter-rouge">FNV1a</code> hash algorithm to the <code class="language-plaintext highlighter-rouge">class name</code>. This algorithm is characterized by the fact that for the same character combination, whether the characters are <code class="language-plaintext highlighter-rouge">normal characters</code> or <code class="language-plaintext highlighter-rouge">wide characters</code>, it does not affect the hash result, producing the same hash value, and is simple and efficient.</p>

<blockquote class="prompt-tip">
  <p>See：</p>

  <p><code class="language-plaintext highlighter-rouge">FTraitUID::MakeUID</code></p>

  <p><code class="language-plaintext highlighter-rouge">FTraitInterfaceUID::MakeUID</code></p>
</blockquote>

<p>Trait objects themselves cannot have internal state, meaning they are <code class="language-plaintext highlighter-rouge">stateless</code>, as their logic runs in worker threads (for example, multiple objects reusing the same animation graph within the same frame execute in different threads).</p>

<p>Their state data should be declared using the type aliases <code class="language-plaintext highlighter-rouge">FSharedData</code> and <code class="language-plaintext highlighter-rouge">FInstanceData</code>, which the UAF system will allocate externally for the Trait objects.</p>

<p><a href="/assets/img/UnrealAnimationFramework/SharedDataInstanceData.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/SharedDataInstanceData.png" alt="SharedData and InstanceData" loading="lazy"></a></p>

<p>FSharedData is read-only data that can be shared among multiple instances of the same animation graph; it is a <code class="language-plaintext highlighter-rouge">USTRUCT</code> that will serialize and <code class="language-plaintext highlighter-rouge">save</code> to a file, typically consisting of some hardcoded configurations.</p>

<p>FInstanceData contains the dynamic/instanced data required by the nodes in each animation graph instance and is a raw CPP structure.</p>

<blockquote class="prompt-tip">
  <p>FSharedData is similar to <code class="language-plaintext highlighter-rouge">FoldProperty</code> in ABP,</p>

  <p>while the mechanism of InstanceData is almost the same as <code class="language-plaintext highlighter-rouge">FInstanceDataType</code>/<code class="language-plaintext highlighter-rouge">UInstanceDataType</code> in <code class="language-plaintext highlighter-rouge">StateTree</code></p>
</blockquote>

<h3 id="code-generation"><span class="me-2">Code Generation</span><a href="#code-generation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>UAF uses several macros to quickly and easily generate the code required for the framework, reducing repetitive work.</p>

<h4 id="macros-for-trait-interface"><span class="me-2">Macros for Trait Interface</span><a href="#macros-for-trait-interface" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The trait interface part is relatively simple, with only two macros.</p>

<p><code class="language-plaintext highlighter-rouge">DECLARE_ANIM_TRAIT_INTERFACE</code> declares and implements <code class="language-plaintext highlighter-rouge">GetInterfaceUID</code>, returning a <code class="language-plaintext highlighter-rouge">compile-time constant</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/DECLARE_ANIM_TRAIT_INTERFACE.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/DECLARE_ANIM_TRAIT_INTERFACE.png" alt="DECLARE_ANIM_TRAIT_INTERFACE" loading="lazy"></a></p>

<p><a href="/assets/img/UnrealAnimationFramework/IEvaluate.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/IEvaluate.png" alt="Trait Interface: IEvaluate" loading="lazy"></a></p>

<p><code class="language-plaintext highlighter-rouge">AUTO_REGISTER_ANIM_TRAIT_INTERFACE</code> <code class="language-plaintext highlighter-rouge">statically registers</code> the shared pointer of the trait interface class to the <code class="language-plaintext highlighter-rouge">global trait interface registry</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/AUTO_REGISTER_ANIM_TRAIT_INTERFACE.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/AUTO_REGISTER_ANIM_TRAIT_INTERFACE.png" alt="AUTO_REGISTER_ANIM_TRAIT_INTERFACE" loading="lazy"></a></p>

<h4 id="macros-for-trait"><span class="me-2">Macros for Trait</span><a href="#macros-for-trait" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The trait section is considerably more complex:</p>

<p>First, you need to use the <code class="language-plaintext highlighter-rouge">DECLARE_ANIM_TRAIT</code> macro within the trait class to <code class="language-plaintext highlighter-rouge">declare</code> some virtual function overrides:</p>

<p><a href="/assets/img/UnrealAnimationFramework/DECLARE_ANIM_TRAIT.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/DECLARE_ANIM_TRAIT.png" alt="DECLARE_ANIM_TRAIT" loading="lazy"></a></p>

<p>This includes several nested macros:</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_BASIC</code> declares and implements <code class="language-plaintext highlighter-rouge">GetTraitUID</code>, returning a <code class="language-plaintext highlighter-rouge">compile-time constant</code>; <code class="language-plaintext highlighter-rouge">GetTraitName</code> returns the trait name; declares an alias for <code class="language-plaintext highlighter-rouge">TraitSuper</code>.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_INSTANCING_SUPPORT</code> add declarations related to trait data.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_INTERFACE_SUPPORT</code> add declarations for accessing the trait interface.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_EVENT_SUPPORT</code> add declarations related to trait events.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_LATENT_PROPERTY_SUPPORT</code> add declarations related to Latent Property (see below for the meaning of <code class="language-plaintext highlighter-rouge">Latent Property</code>).</p>

<p>Then, use the <code class="language-plaintext highlighter-rouge">GENERATE_ANIM_TRAIT_IMPLEMENTATION</code> macro to define the above interfaces.</p>

<p><a href="/assets/img/UnrealAnimationFramework/GENERATE_ANIM_TRAIT_IMPLEMENTATION.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/GENERATE_ANIM_TRAIT_IMPLEMENTATION.png" alt="GENERATE_ANIM_TRAIT_IMPLEMENTATION" loading="lazy"></a></p>

<p>Notably, the parameters <code class="language-plaintext highlighter-rouge">InterfaceEnumeratorMacro, RequiredInterfaceEnumeratorMacro, EventEnumeratorMacro</code> are all <code class="language-plaintext highlighter-rouge">EnumeratorMacros</code>, which are macros used for enumeration, with their prefixes indicating what they enumerate: <code class="language-plaintext highlighter-rouge">trait interface</code>, <code class="language-plaintext highlighter-rouge">required trait interface</code>, and <code class="language-plaintext highlighter-rouge">trait events</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">enumeration macro</code> has one parameter, which is also a macro that takes the <code class="language-plaintext highlighter-rouge">enumerated item</code> as an argument and performs the corresponding operations.</p>

<p>Taking <code class="language-plaintext highlighter-rouge">FBlendTwoWayTrait</code> as an example:</p>

<p><a href="/assets/img/UnrealAnimationFramework/FBlendTwoWayTrait.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FBlendTwoWayTrait.png" alt="FBlendTwoWayTrait" loading="lazy"></a></p>

<p><a href="/assets/img/UnrealAnimationFramework/MacroDefinitionForBlendTwoWayTrait.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/MacroDefinitionForBlendTwoWayTrait.png" alt="Macro definition for BlendTwoWayTrait" loading="lazy"></a></p>

<p>The locally defined <code class="language-plaintext highlighter-rouge">TRAIT_INTERFACE_ENUMERATOR</code> macro enumerates all the trait interfaces implemented by <code class="language-plaintext highlighter-rouge">FBlendTwoWayTrait</code> and passes these interfaces to the <code class="language-plaintext highlighter-rouge">GeneratorMacro</code> parameter.</p>

<p>Combining with the nested macros in <code class="language-plaintext highlighter-rouge">GENERATE_ANIM_TRAIT_IMPLEMENTATION</code>:</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT</code> defines the memory size and alignment for shared and instance data, as well as the constructor and destructor.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_LATENT_PROPERTY_MEMORY_LAYOUT</code> defines the function to retrieve the memory layout information for Latent Property.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_IS_PROPERTY_LATENT</code> defines the function to determine whether the property with the corresponding name is a Latent Property.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_INTERFACE</code> defines the function to retrieve a pointer to the specified trait interface.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_INTERFACES</code> defines the function to retrieve the IDs of all implemented trait interfaces.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_REQUIRED_INTERFACES</code> defines the function to retrieve the IDs of all required trait interfaces.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_ON_TRAIT_EVENT</code> defines the function to respond to the required trait event callbacks.</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_TRAIT_EVENTS</code> defines the function to retrieve the IDs of all responsive trait events.</p>

<p>At this point, the necessary trait definitions for the framework has been automatically generated.</p>

<p><code class="language-plaintext highlighter-rouge">AUTO_REGISTER_ANIM_TRAIT</code>, similar to <code class="language-plaintext highlighter-rouge">AUTO_REGISTER_ANIM_TRAIT_INTERFACE</code>, registers the trait this time.</p>

<blockquote class="prompt-tip">
  <p>Trait registration does not use shared pointers, but is constructed from the callback of <code class="language-plaintext highlighter-rouge">UE::AnimNext::TraitConstructorFunc</code> with the <code class="language-plaintext highlighter-rouge">DestPtr</code> address passed in.</p>
</blockquote>

<h5 id="latent-property"><span class="me-2">Latent Property</span><a href="#latent-property" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5>

<p><code class="language-plaintext highlighter-rouge">Latent Property</code> is the part of shared data that needs to be instantiated, placed after the <code class="language-plaintext highlighter-rouge">FInstanceData</code> section.</p>

<p>For shared data that inherits from <code class="language-plaintext highlighter-rouge">FAnimNextTraitSharedData</code>, you need to use the <code class="language-plaintext highlighter-rouge">GENERATE_TRAIT_LATENT_PROPERTIES</code> macro to <code class="language-plaintext highlighter-rouge">manually</code>、<code class="language-plaintext highlighter-rouge">selectively</code> register the properties that should be marked as <code class="language-plaintext highlighter-rouge">Latent Property</code>:</p>

<p><a href="/assets/img/UnrealAnimationFramework/LATENT_PROPERTIES.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/LATENT_PROPERTIES.png" alt="Latent Property" loading="lazy"></a></p>

<p>This macro also uses an enumeration macro as a parameter, within which it nests the macro:</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_LATENT_CONSTRUCTOR</code> uses <code class="language-plaintext highlighter-rouge">placement new</code> to <code class="language-plaintext highlighter-rouge">individually</code> construct <code class="language-plaintext highlighter-rouge">Latent Property</code> (the memory address is discussed in the following section on <code class="language-plaintext highlighter-rouge">FNodeInstance</code>).</p>

<blockquote class="prompt-tip">
  <p>See: <code class="language-plaintext highlighter-rouge">FExecutionContext::AllocateNodeInstance</code> for how it allocates memory, constructs <code class="language-plaintext highlighter-rouge">instance data</code>, and <code class="language-plaintext highlighter-rouge">Latent Property</code></p>

  <p><code class="language-plaintext highlighter-rouge">GENERATE_ANIM_TRAIT_IMPLEMENTATION</code>-<code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT</code>-<code class="language-plaintext highlighter-rouge">ConstructTraitInstance</code></p>

  <p><code class="language-plaintext highlighter-rouge">GENERATE_TRAIT_LATENT_PROPERTIES</code>-<code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_LATENT_CONSTRUCTOR</code>-<code class="language-plaintext highlighter-rouge">ConstructLatentProperties</code></p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_LATENT_DESTRUCTOR</code> <code class="language-plaintext highlighter-rouge">Destruct</code> <code class="language-plaintext highlighter-rouge">Latent Property</code> one by one</p>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_GET_LATENT_PROPERTY_INDEX</code> Query the index of the <code class="language-plaintext highlighter-rouge">Latent Property</code> for the corresponding offset</p>

<blockquote class="prompt-tip">
  <p><code class="language-plaintext highlighter-rouge">FAnimNextTraitSharedData::GetLatentPropertyIndex</code> comments mentioned: If the <code class="language-plaintext highlighter-rouge">Latent Property</code> corresponding to the offset can be found, it returns the index starting from 1; if not found, it returns the number of <code class="language-plaintext highlighter-rouge">Latent Property</code>, which is less than or equal to 0 (needs to be negative)</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">ANIM_NEXT_IMPL_DEFINE_LATENT_GETTER</code> generates a <code class="language-plaintext highlighter-rouge">getter</code> function for retrieving property values from <code class="language-plaintext highlighter-rouge">FTraitBinding</code> for each <code class="language-plaintext highlighter-rouge">Latent Property</code></p>

<blockquote class="prompt-tip">
  <p>Magic of Macro ! It uses the <code class="language-plaintext highlighter-rouge">constexpr</code> function <code class="language-plaintext highlighter-rouge">GetLatentPropertyIndex</code> to get the <code class="language-plaintext highlighter-rouge">LatentPropertyIndex</code>, and then get the <code class="language-plaintext highlighter-rouge">Latent Property</code> reference from the <code class="language-plaintext highlighter-rouge">Binding</code>.</p>
</blockquote>

<h4 id="traitevent-trait-events"><span class="me-2">TraitEvent Trait Events</span><a href="#traitevent-trait-events" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">FAnimNextTraitEvent</code> is the base class for <code class="language-plaintext highlighter-rouge">trait events</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/FAnimNextTraitEvent.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FAnimNextTraitEvent.png" alt="FAnimNextTraitEvent" loading="lazy"></a></p>

<p><code class="language-plaintext highlighter-rouge">DECLARE_ANIM_TRAIT_EVENT</code>, similar to traits and trait interfaces, declares and defines <code class="language-plaintext highlighter-rouge">EventUID</code>, and additionally supports the <code class="language-plaintext highlighter-rouge">IsA</code> functionality, serving as a simple <code class="language-plaintext highlighter-rouge">alternative mechanism for RTTI</code>.</p>

<blockquote class="prompt-info">
  <p>Since FAnimNextTraitEvent is <code class="language-plaintext highlighter-rouge">USTRUCT</code>, the <code class="language-plaintext highlighter-rouge">IsA</code> should not be necessary. This may be for performance or other considerations.</p>
</blockquote>

<p>Trait events are similar to UI click events and can be marked as <code class="language-plaintext highlighter-rouge">Handled</code>, with the option to set a valid duration or an infinite duration, among other settings.</p>

<h3 id="global-registry"><span class="me-2">Global Registry</span><a href="#global-registry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="ftraitregistry"><span class="me-2">FTraitRegistry</span><a href="#ftraitregistry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The global registry for <code class="language-plaintext highlighter-rouge">trait</code> objects.</p>

<p>When registering traits using macros, <code class="language-plaintext highlighter-rouge">FTraitRegistry</code> prioritizes the default allocated <code class="language-plaintext highlighter-rouge">8KB</code> size <code class="language-plaintext highlighter-rouge">StaticTraitBuffer</code> to store <code class="language-plaintext highlighter-rouge">traits</code>. If this limit is exceeded, it uses <code class="language-plaintext highlighter-rouge">DynamicTraits</code> for storing new trait, which is an optimization for <code class="language-plaintext highlighter-rouge">memory locality</code>.</p>

<blockquote class="prompt-tip">
  <p>There is an interesting little detail here. The DynamicTraits array stores <code class="language-plaintext highlighter-rouge">uintptr_t</code> instead of <code class="language-plaintext highlighter-rouge">void*</code> or <code class="language-plaintext highlighter-rouge">FTrait*</code>, which means <code class="language-plaintext highlighter-rouge">using integers to store pointers</code>.</p>

  <p>Because integers are used, <code class="language-plaintext highlighter-rouge">index of array</code> can be stored at the same time to implement the subsequent <code class="language-plaintext highlighter-rouge">FreeList</code> mechanism:</p>

  <p>When <code class="language-plaintext highlighter-rouge">DynamicTraitFreeIndexHead</code> is valid, <code class="language-plaintext highlighter-rouge">DynamicTraits[DynamicTraitFreeIndexHead]</code> stores the next reusable array element</p>
</blockquote>

<p>Additionally, several <code class="language-plaintext highlighter-rouge">Map</code>s are stored to speed up queries.</p>

<p><code class="language-plaintext highlighter-rouge">FTraitRegistry::Register</code> is used to register traits to DynamicTraits.</p>

<h4 id="ftraitinterfaceregistry"><span class="me-2">FTraitInterfaceRegistry</span><a href="#ftraitinterfaceregistry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>The global registry for <code class="language-plaintext highlighter-rouge">trait interface</code> objects.</p>

<p>In comparison, <code class="language-plaintext highlighter-rouge">FTraitInterfaceRegistry</code> is quite straightforward, simply a map from interface IDs to smart pointers.</p>

<h2 id="node"><span class="me-2">Node</span><a href="#node" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<blockquote>
  <p><a href="https://viewer.diagrams.net/?tags=%7B%7D&amp;lightbox=1&amp;highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=rough%20memory%20layout%20of%20UAF%20types&amp;dark=auto#R%3Cmxfile%3E%3Cdiagram%20id%3D%22kCmcn5g-ny7A861wYZVO%22%20name%3D%22MemoryLayoutOfFNodeInstance%22%3E3ZjZctsgFIafxpfNIMlafOklW6fpJJOZdnpJJCyRIuFByNvT92CjFXmcpkns9MaCHzhI338sjj1wpun6WuBFcscjwgY2itYDZzaw7cD24FMJm70wdLUQCxrtJasWHumWaBFptaARyVsTJedM0kVbDHmWkVC2NCwEX7WnzTlr77rAMTGExxAzU%2F1JI5nox3JRrd8QGiflzhbSIykuJ2shT3DEVw3JuRw4U8G53LfS9ZQwxa7ksl93dWC0ujFBMvmSBQ%2FXkx%2FPIc%2B33vwGTb7%2BGpMV%2FaKjLDEr9ANffQcLb7Nc4iwk%2Bs7lpsQheJFFREVEA2eySqgkjwscqtEV%2BA9aIlMGPQuaOjYRkqwP3rRVoYAUIjwlUmxgil7glKB1%2Brie7q9qM6yScNIwopyHtf9xFbpGBA1N6S%2BI2QaxEtYMSwwjfK5yVGAq4WqdnOAwODeCzhGCHk4VhuwpV5cWTvvkOD3rOM7gI2kOX08zOzlN%2FwU0qzfqh%2BB0DZyAkMGuk4guoRmr5sXFRanCJo0BAyigkW1qmNE4g3YIiIgAQQGkcOCM9UBKo0gt78XfNugt8tnvOOC7hgNejwHOexng9RjQgUqyaKyOduhxmNfm2yYE3wQhO5N32hVl5QoI1%2BjNoTnljIvdXg5CLiLz3SrBf5PWiDWbTKuRsjqwK19IZJQWR11pUHd7qJeaIAxLumyH77NC73DPaSYPn6pe0HEz54UIiV7VrCk6gYb%2BkUCAOibSCASO4E1j2kJNyI3cqcC8Pp38c0unACPUn06uj9AnSJ6jnr80eSwUnHv2BEb2jENZYLUuJSnfUceM8RCAcvM4%2FZe3vyA53eKnXSiVFvohIa47GbgzFauQPN%2F%2FYLKMjMp4Rjrpp6U3ODScUds43%2B45tt%2Fr1LiWd7cF3TyMnu%2FYcroc%2B1s66vkd8w1Lssu2e8EX8LDq9ueCp8oh2LQugzqeHSl63vwADuwT1ue9LM36%2FLOwHHnnxtKszv%2FvcnLUzeb3KyehW%2F95sn%2Fh1%2F9AOZd%2FAA%3D%3D%3C%2Fdiagram%3E%3Cdiagram%20name%3D%22MemoryLayoutOfFNodeDescription%22%20id%3D%22hcCWD1qce99PYXvevLv8%22%3E5Zhdb9sgFIZ%2FTaTuopWJ68S9zEc%2Fpm1VpW5qtTtiSMyKTYRJk%2FTX75BgxzakTdc0sbSrwAsc4DkHc0jLHySLa4mn8Q9BKG%2B1PbJo%2BcNWu41QiOBHK8u10gmMMJGMmE4b4Z69UCN6Rp0xQrNKRyUEV2xaFSORpjRSFQ1LKebVbmPBq7NO8YRawn2Eua0%2BMKLitRoG3ka%2FoWwS5zMjz7QkOO9shCzGRMxLkn%2FZ8gdSCLUuJYsB5RpezmU97mpLa7EwSVO1ywCspB8%2B4Oyp8%2B3P6a%2FH8HF4wU%2BNlWfMZ2bDV7fgwyHNIsmmionULF4tcyJSzFJCtVGv5ffnMVP0fooj3TqHGAAtVgmHGoKivch8RioVXZQks%2BhrKhKq5BK6mNZ2xwA0EeSHpj7f%2BAPlkOOSL%2FJx2ITApDC9oQQFA%2Bod0NoWtPsYdkiGWGHQxVgHqcRMwS%2FszTsZ4Yx%2BOTrIc69pIP13gNQdTzAhTLHnBsBEXvA2zfCQMM%2FfARNOdYfDgvojCaWJLjUkSBHagWvxkT0I2MACm9Mj7DnHd3Z2lqswSanBIgogVBUb5mySQjkCbFSCoHExuIN6piFhhOjhTv5VD%2B3FBajmgovAckHH4QH%2FszzQcXigRpWmpKeve6gJ6FcFXEWUKSxVrfNKu2I8HwHmSrUxFAeCC7may%2Ffg7NPxapQUT7TSgob9QdGSZwzt1xxDSSUDsd1Soh44qOeapBzrb2M1BXK4wsxwJ1iqtl%2BzgVfzZiZmMqJmVDnPqBkqDuw2Q4B6QpVlCDyCl6VuU90hs2KnAPPv4dRtWjiF2PPc4RR0vVdPdUOC502f7xo8yA%2BaHj2hFT29SM2wHpfQRKyoY85FhJ3p80c%2B%2F5Jm7AWPVqZ0WJhNgt2g3wqG2tZMiWz9iEJWRKUipbXwM9Iebg2%2Fll0G5457%2B7NujZ8AoncbdXt9X4y%2BPt0p%2Fhu53jbfsYId3kkx1YhpdkMxAeR7SHosUA6cW9kVrF7LeVzHdx85j5OdnZlX2S1vcKpjEqY%2BOr1uPV05Or2dMsZtQEc75pGHxhyGTcPsuscbnph%2FyAOo%2BFYeITF3esC%2BCw%2F5gP8gzO7xHvBOmBf%2FWzh7h3tnQnXzT%2Bs6E9z8X%2B1f%2FgU%3D%3C%2Fdiagram%3E%3Cdiagram%20id%3D%22oWyUg2EomUwlymL4ElC6%22%20name%3D%22MemoryLayoutOfFNodeTemplate%22%3E1ZfdctowEIWfxpfNyBIGchlI0jSTtJ1JJr1WrcXWVLYYWQTI03eN5V%2BRIW3TQm8Y%2BWh3Zb6zsHbA5tnmo%2BHL9F4LUAElYhOwy4DS8%2BkIP0thWwnRiFZCYqSopLAVHuQLOJE4dSUFFL1Aq7WyctkXY53nENuexo3R637YQqv%2BqUuegCc8xFz56jcpbFqp04i0%2Bg3IJK1PDonbyXgd7IQi5UKvOxK7CtjcaG2rVbaZgyrZ1VyqvOtXdpsbM5DbtyTcZk%2FC6Pnjl7vtHbt9mt7cq08fXJVnrlbuC19%2FRgsfIVsqbsHdud3WOIxe5QLKiiRgs3UqLTwseVzurtF%2F1FKbKbwKcelqg7GwefWmwwYFthDoDKzZYohLoDVO1z6jui%2FWrRlhTTjtGDF2Gnf%2BJ03pFhEuHKVfIEZ9Yo%2BGS9siI%2BHRsTF2GFuD9p9gY4ex0aNji0anhm10GFt%2BdGyT8alhizxsAR0rPHUm5DMuk3J5dnZWq3hIZ8MDimhsnxpXMslxHSMiMCiUACWOjQu3kUkhyvS9%2BPsGvYcDdOAAjTwHxnsMYH%2FLgPEeAwZQIRcX5YDGK41xfb59QoXlxg6Cd9q1VHUGlutcLXA510qb3VmMkIjAYpdl9A%2Fo7YSXs3mzU8942vgCwntAOOhKh3q0h3qtGcCfsHzul99nhTvhq5Z48KuzMRq6WeiVicFldZ8MBoUYPVAIUSdgvULoCN92wpZlQOH1TgPm99tpcmrtNOWE7G%2BnaELIf9A8Bz1%2Fa%2FOcj0%2B9eaZe81zEdsXLvAwyvYPOldIx8tT%2BNP2TP38DhXzh33elyq5wXxLrRrMguixrrawuqree0GuoXOcw6D4nvcPMoIOHHWxcb2aE7zQ08LJ90al8bd8W2dVP%3C%2Fdiagram%3E%3C%2Fmxfile%3E">rough memory layout，drawing with drawio</a></p>
</blockquote>

<p>This section introduces some key types related to nodes.</p>

<h3 id="fnodetemplate"><span class="me-2">FNodeTemplate</span><a href="#fnodetemplate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>A <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> is a combination of a set of <code class="language-plaintext highlighter-rouge">traits</code>, which can include multiple sets of <code class="language-plaintext highlighter-rouge">base + additive</code> traits. All animation graphs can share the same template object.</p>

<p><a href="/assets/img/UnrealAnimationFramework/FNodeTemplate.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FNodeTemplate.png" alt="FNodeTemplate" loading="lazy"></a></p>

<p>The <code class="language-plaintext highlighter-rouge">traits</code> that make up the node template are stored as <code class="language-plaintext highlighter-rouge">FTraitTemplate</code> objects at the end of the <code class="language-plaintext highlighter-rouge">contiguous memory</code> of the <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> object.</p>

<p><a href="/assets/img/UnrealAnimationFramework/FNodeTemplate_GetTraits.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FNodeTemplate_GetTraits.png" alt="FNodeTemplate::GetTraits" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p><code class="language-plaintext highlighter-rouge">FNodeTemplateBuilder::BuildNodeTemplate</code> constructs an FNodeTemplate object and the FTraitTemplate contained in it in a contiguous buffer of <code class="language-plaintext highlighter-rouge">TArray&lt;uint8&gt;</code></p>
</blockquote>

<p>From it, you can obtain the <code class="language-plaintext highlighter-rouge">UID</code>, <code class="language-plaintext highlighter-rouge">base address of the trait array</code>, the number of traits, and other information.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">FNodeTemplate::NodeSharedDataSize</code> is the size of the <code class="language-plaintext highlighter-rouge">shared data</code> for all traits (including the <code class="language-plaintext highlighter-rouge">FLatentPropertiesHeader</code> of the base trait) after alignment.</li>
  <li><code class="language-plaintext highlighter-rouge">FNodeTemplate::NodeInstanceDataSize</code> is the size of the <code class="language-plaintext highlighter-rouge">instance data</code> for all traits after alignment.</li>
</ul>

<p><a href="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeTemplate.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeTemplate.png" alt="rough memory layout of FNodeTemplate" loading="lazy"></a></p>

<h4 id="ftraittemplate"><span class="me-2">FTraitTemplate</span><a href="#ftraittemplate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">FTraitTemplate</code> is the <code class="language-plaintext highlighter-rouge">trait</code> within the node template. In addition to providing basic information about the trait such as <code class="language-plaintext highlighter-rouge">UID</code>, trait type, shared/instance data, number of subtraits, and number of <code class="language-plaintext highlighter-rouge">Latent Properties</code>, it also allows you to obtain the <code class="language-plaintext highlighter-rouge">offset of the shared data</code>, the <code class="language-plaintext highlighter-rouge">offset of the pointer to the shared latent property array</code>, and the <code class="language-plaintext highlighter-rouge">offset of the instance data</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/FTraitTemplate.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/FTraitTemplate.png" alt="FTraitTemplate" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>See：<code class="language-plaintext highlighter-rouge">FNodeTemplate::Finalize</code></p>
</blockquote>

<blockquote class="prompt-tip">
  <p>I think the naming of the two member functions <code class="language-plaintext highlighter-rouge">FTraitTemplate::GetTraitDescription</code> is a bit confusing. The more understandable name should be <code class="language-plaintext highlighter-rouge">GetTraitSharedData</code>, which is used to get the shared data pointer of the trait. It may be a typo or a name change.</p>
</blockquote>

<h3 id="fnodedescription"><span class="me-2">FNodeDescription</span><a href="#fnodedescription" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The only read-only data within an <code class="language-plaintext highlighter-rouge">animation graph</code>. Although the object itself is 8 bytes in size, when allocating memory, it includes the size of the shared data from the traits on the node, making it <code class="language-plaintext highlighter-rouge">an object whose size varies in usage</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeDescription.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeDescription.png" alt="rough memory layout of FNodeDescription" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>See：</p>

  <p><code class="language-plaintext highlighter-rouge">FTraitReader::ReadGraphSharedData</code></p>

  <p>and some other details:
<code class="language-plaintext highlighter-rouge">FNodeDescription::Serialize</code>
<code class="language-plaintext highlighter-rouge">FTrait::SerializeTraitSharedData</code>
<code class="language-plaintext highlighter-rouge">FTraitWriter::WriteNode</code>
<code class="language-plaintext highlighter-rouge">FTrait::SaveTraitSharedData</code></p>

  <p>After reading, it is stored in <code class="language-plaintext highlighter-rouge">UAnimNextAnimationGraph::SharedDataBuffer</code>. For usage, refer to <code class="language-plaintext highlighter-rouge">FExecutionContext::GetNodeDescription</code></p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">FNodeDescription::TemplateHandle</code> is used to obtain an instance of the <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> object from <code class="language-plaintext highlighter-rouge">FNodeTemplateRegistry</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">FNodeDescription::NodeInstanceDataSize</code> contains the size of the <code class="language-plaintext highlighter-rouge">instantiation data</code>, plus the <code class="language-plaintext highlighter-rouge">total size</code> of all <code class="language-plaintext highlighter-rouge">Latent Properties</code>.</li>
</ul>

<blockquote class="prompt-tip">
  <p>Note the difference between <code class="language-plaintext highlighter-rouge">FNodeDescription::NodeInstanceDataSize</code> and <code class="language-plaintext highlighter-rouge">FNodeTemplate::NodeInstanceDataSize</code></p>

  <p>In addition, <code class="language-plaintext highlighter-rouge">FNodeDescription</code> and <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> are <code class="language-plaintext highlighter-rouge">many-to-one</code>, which can be understood from their usage.</p>
</blockquote>

<h3 id="fnodeinstance"><span class="me-2">FNodeInstance</span><a href="#fnodeinstance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The instantiated data of the node, dynamically created at runtime, has a size of 16 bytes itself. When allocating memory, it includes the size of the instantiated data of the traits and their <code class="language-plaintext highlighter-rouge">Latent Property</code> size, <code class="language-plaintext highlighter-rouge">which is also an object that varies in size depending on usage</code>; built-in reference counting.</p>

<p><a href="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeInstance.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/MemoryLayoutOfFNodeInstance.png" alt="rough memory layout of FNodeInstance" loading="lazy"></a></p>

<blockquote class="prompt-tip">
  <p>For usage, refer to ：<code class="language-plaintext highlighter-rouge">FAnimationAnimNextRuntimeTest_TraitSerialization::RunTest</code>，<code class="language-plaintext highlighter-rouge">FExecutionContext::AllocateNodeInstance</code></p>
</blockquote>

<h3 id="fnodetemplateregistry"><span class="me-2">FNodeTemplateRegistry</span><a href="#fnodetemplateregistry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The global registry of the <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> object, ensuring that all <code class="language-plaintext highlighter-rouge">FNodeTemplate</code> instances are contiguous in memory.</p>

<h3 id="ftraitstackbinding"><span class="me-2">FTraitStackBinding</span><a href="#ftraitstackbinding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Describes the data required for a <code class="language-plaintext highlighter-rouge">set of traits</code> (one base trait and its children/additive traits) used to query traits or the <code class="language-plaintext highlighter-rouge">trait interface</code>.</p>

<blockquote class="prompt-tip">
  <p>See：<code class="language-plaintext highlighter-rouge">FTraitStackBinding::FTraitStackBinding</code>，especially the last few lines</p>
</blockquote>

<p>For example, <code class="language-plaintext highlighter-rouge">FTraitStackBinding::GetInterfaceImpl</code>: attempts to find the trait that implements the specified <code class="language-plaintext highlighter-rouge">InterfaceUID</code> from the <code class="language-plaintext highlighter-rouge">trait stack</code> and returns the <code class="language-plaintext highlighter-rouge">binding</code> of that trait.</p>

<h3 id="ftraitbinding"><span class="me-2">FTraitBinding</span><a href="#ftraitbinding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Describes the data of a <code class="language-plaintext highlighter-rouge">specific trait</code> within a set of traits, allowing you to query whether the current trait implements the specified <code class="language-plaintext highlighter-rouge">trait interface</code>.</p>

<h3 id="ttraitbinding"><span class="me-2">TTraitBinding</span><a href="#ttraitbinding" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Strongly typed/type-safe <code class="language-plaintext highlighter-rouge">FTraitBinding</code>.</p>

<h2 id="fexecutioncontext"><span class="me-2">FExecutionContext</span><a href="#fexecutioncontext" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Since traits are stateless, the <code class="language-plaintext highlighter-rouge">dynamic data</code>/<code class="language-plaintext highlighter-rouge">instance data</code> during execution requires an object to hold it, which is the <code class="language-plaintext highlighter-rouge">FExecutionContext</code>, the execution context object.</p>

<p>It is used to <code class="language-plaintext highlighter-rouge">bind</code> to a graph instance and provides a unified <code class="language-plaintext highlighter-rouge">trait query</code> interface for nodes.</p>

<p>The <code class="language-plaintext highlighter-rouge">Update</code> and <code class="language-plaintext highlighter-rouge">Evaluate</code> processes of the graph are encapsulated in the execution function of a RigVM node: <code class="language-plaintext highlighter-rouge">FRigUnit_AnimNextRunAnimationGraph_v2_Execute()</code>.</p>

<h3 id="fupdatetraversalcontext"><span class="me-2">FUpdateTraversalContext</span><a href="#fupdatetraversalcontext" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The derived context object used when <code class="language-plaintext highlighter-rouge">updating</code> the graph.</p>

<p>Internally, it uses a stack (LIFO) allocated on the <code class="language-plaintext highlighter-rouge">MemStack</code> to implement a <code class="language-plaintext highlighter-rouge">depth-first traversal</code> of the <code class="language-plaintext highlighter-rouge">trait tree</code>, rather than the <code class="language-plaintext highlighter-rouge">recursive</code> method used in ABP.</p>

<blockquote class="prompt-tip">
  <p>See: <code class="language-plaintext highlighter-rouge">UE::AnimNext::UpdateGraph</code>. Each trait is executed twice in the while loop, corresponding to <code class="language-plaintext highlighter-rouge">IUpdate::PreUpdate</code> and <code class="language-plaintext highlighter-rouge">IUpdate::PostUpdate</code>.</p>

  <p><code class="language-plaintext highlighter-rouge">IUpdate::OnBecomeRelevant</code> is also called here.</p>
</blockquote>

<h3 id="fevaluatetraversalcontext"><span class="me-2">FEvaluateTraversalContext</span><a href="#fevaluatetraversalcontext" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>The derived context object used when <code class="language-plaintext highlighter-rouge">evaluating</code> the graph.</p>

<p>The internal <code class="language-plaintext highlighter-rouge">FEvaluationProgram</code> is used to store the <code class="language-plaintext highlighter-rouge">FAnimNextEvaluationTask</code> that each node needs to execute while traversing the graph.<br />
It then calls <code class="language-plaintext highlighter-rouge">FEvaluationProgram::Execute</code> to perform each evaluation task on the <code class="language-plaintext highlighter-rouge">FEvaluationVMStack</code>.</p>

<blockquote class="prompt-tip">
  <p>See: <code class="language-plaintext highlighter-rouge">UE::AnimNext::EvaluateGraph</code>, the execution process is similar to <code class="language-plaintext highlighter-rouge">UpdateGraph</code></p>
</blockquote>

<h4 id="fanimnextevaluationtask"><span class="me-2">FAnimNextEvaluationTask</span><a href="#fanimnextevaluationtask" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">FAnimNextEvaluationTask</code> is a logical object that can be reused between traits, representing micro-instructions running on the <code class="language-plaintext highlighter-rouge">evaluation virtual machine</code>, which can handle input and output at the same time through the internal state of the virtual machine (also a <code class="language-plaintext highlighter-rouge">stack</code>).</p>

<h1 id="uaf-modules">UAF Modules</h1>

<p>UAF consists of multiple modules:</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAFOn5.6.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAFOn5.6.png" alt="UAF On 5.6" loading="lazy"></a></p>

<p>On the <code class="language-plaintext highlighter-rouge">ue5-main</code> branch, the prefix of the series of module names has changed from <code class="language-plaintext highlighter-rouge">AnimNext</code> to <code class="language-plaintext highlighter-rouge">UAF</code>.</p>

<p><a href="/assets/img/UnrealAnimationFramework/UAFOnMain.png" class="popup img-link shimmer"><img src="/assets/img/UnrealAnimationFramework/UAFOnMain.png" alt="UAF On ue5-main" loading="lazy"></a></p>

<p>Among them:
<code class="language-plaintext highlighter-rouge">UAF</code>/<code class="language-plaintext highlighter-rouge">AnimNext</code>: Provides core animation utility functions, defines base class interfaces, etc. For example: <code class="language-plaintext highlighter-rouge">UE::AnimNext::FDecompressionTools::GetAnimationPose</code></p>

<p><code class="language-plaintext highlighter-rouge">UAFAnimGraph</code>/<code class="language-plaintext highlighter-rouge">AnimNextAnimGraph</code>: Implements RigVM-based functionality related to animation graphs.</p>

<p>These two modules are the main focus of this article.</p>

<p>Other modules introduce functionalities from <code class="language-plaintext highlighter-rouge">other modules/systems</code> to <code class="language-plaintext highlighter-rouge">UAF</code>, such as incorporating <code class="language-plaintext highlighter-rouge">StateTree</code>, <code class="language-plaintext highlighter-rouge">PoseSearch</code>, etc.</p>

<h2 id="soa-struct-of-array"><span class="me-2">SoA (struct of array)</span><a href="#soa-struct-of-array" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Each utility function in <code class="language-plaintext highlighter-rouge">TransformArrayOperations.h</code> has both <code class="language-plaintext highlighter-rouge">AoS</code> and <code class="language-plaintext highlighter-rouge">SoA</code> versions, with the code prioritizing the use of <code class="language-plaintext highlighter-rouge">AoS</code>. This indicates that in terms of data structure design, UAF is more <code class="language-plaintext highlighter-rouge">data-oriented</code>.</p>

<h1 id="conclusion">Conclusion</h1>

<p>UAF is a redesigned, data-oriented, composition-oriented, high-performance, flexible, concise, and easily extensible animation framework.</p>

<p>It completely abandons the ABP framework and embraces RigVM.</p>

<p>Due to its feature set still being in development, it is currently in an experimental phase.</p>

<h1 id="miscellaneous">Miscellaneous</h1>

<h2 id="writing-animation-blueprints-in-code"><span class="me-2">Writing Animation Blueprints in Code</span><a href="#writing-animation-blueprints-in-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Refer to code of <code class="language-plaintext highlighter-rouge">test cases</code> from <code class="language-plaintext highlighter-rouge">UAFTestSuite</code>/<code class="language-plaintext highlighter-rouge">AnimNextTestSuite</code> and <code class="language-plaintext highlighter-rouge">UAFAnimGraphTestSuite</code>/<code class="language-plaintext highlighter-rouge">AnimNextAnimGraphTestSuite</code> modules.</p>

<h2 id="playing-montages-in-uaf"><span class="me-2">Playing “Montages” in UAF</span><a href="#playing-montages-in-uaf" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Due to the length of this article, I decide to not to elaborate further.</p>

<p>The relevant nodes are <code class="language-plaintext highlighter-rouge">UInjectionCallbackProxy</code>, <code class="language-plaintext highlighter-rouge">UPlayAnimCallbackProxy</code>.</p>

<p>The related code can be found in <code class="language-plaintext highlighter-rouge">UE::AnimNext::FInjectionUtils::Inject</code>.</p>

<h2 id="official-faq-link"><span class="me-2">Official FAQ Link</span><a href="#official-faq-link" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p><a href="https://dev.epicgames.com/community/learning/knowledge-base/nWWx/unreal-engine-unreal-animation-framework-uaf-faq">Unreal Animation Framework (UAF, AnimNext) FAQ</a></p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/unreal-engine/">Unreal Engine</a>,
          <a href="/categories/animation/">Animation</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/gameplay/"
            class="post-tag no-text-decoration"
          >gameplay</a>
        
          <a
            href="/tags/animation/"
            class="post-tag no-text-decoration"
          >animation</a>
        
          <a
            href="/tags/tutorial/"
            class="post-tag no-text-decoration"
          >tutorial</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=My%20Understanding%20of%20the%20Unreal%20Animation%20Framework%20in%205.6%20-%20RemRemRemRe&url=https%3A%2F%2Fremremremre.github.io%2Fposts%2FMy-understanding-of-Unreal-Animation-Framework-in-5.6%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fremremremre.github.io%2Fposts%2FMy-understanding-of-Unreal-Animation-Framework-in-5.6%2F&text=My%20Understanding%20of%20the%20Unreal%20Animation%20Framework%20in%205.6%20-%20RemRemRemRe" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    
        <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script>
        <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon">
          <share-to-mastodon
            class="share-mastodon"
            message="My%20Understanding%20of%20the%20Unreal%20Animation%20Framework%20in%205.6%20-%20RemRemRemRe"
            url="https%3A%2F%2Fremremremre.github.io%2Fposts%2FMy-understanding-of-Unreal-Animation-Framework-in-5.6%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]"
          >
            <i class="fa-fw fa-brands fa-mastodon"></i>
          </share-to-mastodon>
        </button>

        

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Latent-Timer/">Latent Timer</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Sharing-Animation-on-Unrelated-Skeleton-in-UnrealEngine/">Sharing Animation on Unrelated Skeleton in UnrealEngine</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/">My Understanding of the Unreal Animation Framework in 5.6</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/Get-Montage-Instance/">How to get MontageInstance correctly</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/RemGameplayCamera-from-zero/">Re:RemGameplayCamera from zero</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/gameplay/">gameplay</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tutorial/">tutorial</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/animation/">animation</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/documentation/">documentation</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/remcommon/">remcommon</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/remgameplaycamera/">remgameplaycamera</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tooling/">tooling</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/Sharing-Animation-on-Unrelated-Skeleton-in-UnrealEngine/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1771060637"
  data-df="ll"
  
>
  Feb 14, 2026
</time>

              <h4 class="pt-0 my-2">Sharing Animation on Unrelated Skeleton in UnrealEngine</h4>
              <div class="text-muted">
                <p>Target Effect  This article primarily introduces a method to achieve the animation effect shown below:    Unlike the standard approach of properly scaling and sharing animations through animation r...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/Get-Montage-Instance/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1754326800"
  data-df="ll"
  
>
  Aug  5, 2025
</time>

              <h4 class="pt-0 my-2">How to get MontageInstance correctly</h4>
              <div class="text-muted">
                <p>Terms  Montage  refers to UAnimMontage Object  MontageInstance  refers to FAnimMontageInstance Object  Get the MontageInstance  GetInstanceForMontage - Find first matching MontageInstance  Finding ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/Latent-Timer/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1728105292"
  data-df="ll"
  
>
  Oct  5, 2024
</time>

              <h4 class="pt-0 my-2">Latent Timer</h4>
              <div class="text-muted">
                <p>Latent timer  Why “reinventing the wheel” while we have TimerManager  Well, TimerManager has many problems when it comes to gameplay:          SetTimerForNextTick actually called this tick rather t...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/Get-Montage-Instance/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>How to get MontageInstance correctly</p>
    </a>
  

  
    <a
      href="/posts/Sharing-Animation-on-Unrelated-Skeleton-in-UnrealEngine/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Sharing Animation on Unrelated Skeleton in UnrealEngine</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2026</time>

    
      <a href="https://twitter.com/_RemRemRemRe_">RemRemRemRe</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.4.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/gameplay/">gameplay</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tutorial/">tutorial</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/animation/">animation</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/documentation/">documentation</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/remcommon/">remcommon</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/remgameplaycamera/">remgameplaycamera</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tooling/">tooling</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

