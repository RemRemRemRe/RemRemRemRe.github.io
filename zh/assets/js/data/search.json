[
  
  {
    "title": "ä½¿ç”¨è™šå¹»å¼•æ“ä¸­åœ¨ä¸ç›¸å…³çš„éª¨æ¶é—´å…±äº«åŠ¨ç”»",
    "url": "/posts/Sharing-Animation-on-Unrelated-Skeleton-in-UnrealEngine/",
    "categories": "Unreal Engine, Animation",
    "tags": "gameplay, animation, tutorial",
    "date": "2026-02-14 17:17:17 +0800",
    "content": "ç›®æ ‡æ•ˆæœ  æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸€ç§å®ç°ä¸‹å›¾åŠ¨ç”»æ•ˆæœçš„æ–¹æ³•ï¼š    ä¸æ­£å¸¸çš„ï¼Œé€šè¿‡åŠ¨ç”»é‡å®šå‘æ­£ç¡®ç¼©æ”¾å¹¶å…±äº«åŠ¨ç”»ç›¸åï¼Œæœ¬æ–¹æ³•å¯ä»¥ç”¨äºå¾—åˆ°ä¸æ¨¡å‹æ— å…³çš„ï¼Œå®Œå…¨ä¸€è‡´çš„éª¨éª¼æ•°æ®ã€‚å³ä¸è®ºç”¨ä»€ä¹ˆæ¨¡å‹ï¼Œæ’­æ”¾åŠ¨ç”»å¾—åˆ°çš„éª¨éª¼æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚  å‰ç½®çŸ¥è¯†  é¦–å…ˆè®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾ä¸‹ï¼Œè™šå¹»å¼•æ“åŠ¨ç”»ç³»ç»Ÿçš„åŸºç¡€çš„åŠ¨ç”»èµ„äº§ ï¼š  éª¨æ¶ï¼Œéª¨éª¼æ¨¡å‹ï¼ŒåŠ¨ç”»åºåˆ—æ˜¯è™šå¹»å¼•æ“ä¸­æ’­æ”¾åŠ¨ç”»æ‰€å¿…é¡»çš„åŸºç¡€èµ„äº§  ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ç§èµ„äº§å„å¸å…¶èŒï¼ˆå•ä¸€èŒè´£ï¼‰ï¼Œ  éª¨æ¶æä¾›éª¨éª¼å±‚çº§æ•°æ®ï¼Œ ä¸åŠ¨ç”»åºåˆ—ä¸€èµ·å¾—åˆ°æ¯å¸§çš„å§¿åŠ¿æ•°æ® éª¨éª¼æ¨¡å‹æä¾›è’™çš®ä¿¡æ¯ï¼Œ ç”¨äºåç»­å°†å§¿åŠ¿æ•°æ®è½¬æ¢åˆ°é¡¶ç‚¹æ•°æ®ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºæ¥åœ¨åŠ¨çš„æ¨¡å‹  ä¸‹é¢æˆ‘ä»¬é€é¡¹äº†è§£ä¸€ä¸‹æœ¬æ–‡å…³æ³¨çš„æ•°æ®é¡¹  éª¨æ¶  /**  *\tUSkeleton : that links between mesh and animation  *\t\t- Bone hierarchy for animations  *\t\t- Bone/track linkup between mesh and animation  *\t\t- Retargetting related  */ class USkeleton    å…¶æ ¸å¿ƒæˆå‘˜å˜é‡åŠç”¨é€”ï¼š  TArray&lt;struct FBoneNode&gt; BoneTree    æè¿°éª¨éª¼é—´çš„å±‚çº§ä¿¡æ¯ï¼ˆå¤šå‰æ ‘ï¼‰   TMap&lt;TObjectKey&lt;USkinnedAsset&gt;, TUniquePtr&lt;FSkeletonToMeshLinkup&gt;&gt; SkinnedAssetLinkupCache    ä¸è‹¥å¹²ä¸ªéª¨éª¼æ¨¡å‹çš„å‚è€ƒéª¨æ¶ä¹‹é—´çš„éª¨éª¼ä¸‹æ ‡çš„æ˜ å°„å…³ç³» (éª¨æ¶çš„éª¨éª¼ä¸‹æ ‡ä¸æ¨¡å‹çš„å‚è€ƒéª¨æ¶çš„éª¨éª¼ä¸‹æ ‡çš„æ˜ å°„)   TMap&lt; FName, FReferencePose &gt; AnimRetargetSources    ç”¨äºåŠ¨ç”»é‡å®šå‘   FReferenceSkeleton ReferenceSkeleton         å‚è€ƒéª¨æ¶ï¼Œä¿å­˜äº†æ¥è‡ªäºåŸå§‹æ¨¡å‹çš„åˆå§‹éª¨éª¼åŠå§¿åŠ¿ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‚è€ƒå§¿åŠ¿           ä»¥åŠå…¶å®ƒå¾ˆå¤šä¿¡æ¯      TArray&lt;TSoftObjectPtr&lt;USkeleton&gt;&gt; CompatibleSkeletons            å…¼å®¹çš„å…¶å®ƒéª¨æ¶ï¼ˆå…¼å®¹æ€§éª¨æ¶ï¼‰           TArray&lt;FAnimSlotGroup&gt; SlotGroups            è’™å¤ªå¥‡æ’æ§½å’Œåˆ†ç»„           TArray&lt;FVirtualBone&gt; VirtualBones            è™šæ‹Ÿéª¨éª¼           TArray&lt;TObjectPtr&lt;class USkeletalMeshSocket&gt;&gt; Sockets            æ’å­”           TArray&lt;TObjectPtr&lt;UBlendProfile&gt;&gt; BlendProfiles            æ··åˆç”¨çš„é…ç½®æ–‡ä»¶           éª¨éª¼æ¨¡å‹  /**  * SkeletalMesh is geometry bound to a hierarchical skeleton of bones which can be animated for the purpose of deforming the mesh.  * Skeletal Meshes are built up of two parts; a set of polygons composed to make up the surface of the mesh, and a hierarchical skeleton which can be used to animate the polygons.  * The 3D models, rigging, and animations are created in an external modeling and animation application (3DSMax, Maya, Softimage, etc).  *  * @see https://docs.unrealengine.com/latest/INT/Engine/Content/Types/SkeletalMeshes/  */ class USkeletalMesh   å…¶æ ¸å¿ƒæˆå‘˜å˜é‡åŠç”¨é€”ï¼š  TObjectPtr&lt;USkeleton&gt; Skeleton    å…³è”çš„éª¨æ¶   FReferenceSkeleton RefSkeleton         å‚è€ƒéª¨æ¶           å…¶å®ƒä¿¡æ¯      TObjectPtr&lt;USkeletalMeshLODSettings&gt; LODSettings            ç»†èŠ‚å±‚çº§é…ç½®           TArray&lt;TObjectPtr&lt;class USkeletalMeshSocket&gt;&gt; Sockets            æ’å­”           TArray&lt;TObjectPtr&lt;UMorphTarget&gt;&gt; MorphTargets            å½¢å˜åŠ¨ç”»ï¼ˆé¡¶ç‚¹åŠ¨ç”»ï¼‰           åŠ¨ç”»åºåˆ—  class UAnimSequence : public UAnimSequenceBase   å…¶æ ¸å¿ƒæˆå‘˜å˜é‡åŠç”¨é€”ï¼š  TObjectPtr&lt;class USkeleton&gt; Skeleton    å…³è”çš„éª¨æ¶   FRawCurveTracks RawCurveData    åŠ¨ç”»æ›²çº¿åŸå§‹å€¼   TArray&lt;struct FAnimNotifyEvent&gt; Notifies         åŠ¨ç”»é€šçŸ¥           å…¶å®ƒ      TScriptInterface&lt;IAnimationDataModel&gt; DataModelInterface            åŠ¨ç”»æºæ•°æ®è½½ä½“ ï¼ˆRaw Dataï¼‰           TObjectPtr&lt;class UAnimBoneCompressionSettings&gt; BoneCompressionSettings            éª¨éª¼å‹ç¼©è®¾ç½®           TObjectPtr&lt;class UAnimCurveCompressionSettings&gt; CurveCompressionSettings            æ›²çº¿å‹ç¼©è®¾ç½®           FName RetargetSource            é‡å®šå‘æ¥æº           TArray&lt;FAnimSyncMarker&gt;\t\tAuthoredSyncMarkers            åŒæ­¥æ ‡è®°           USkeletalMeshComponent  /**  * SkeletalMeshComponent is used to create an instance of an animated SkeletalMesh asset.  *  * @see https://docs.unrealengine.com/latest/INT/Engine/Content/Types/SkeletalMeshes/  * @see USkeletalMesh  */ class USkeletalMeshComponent    å…¶æ ¸å¿ƒæˆå‘˜å˜é‡åŠç”¨é€”ï¼š  TArray&lt;FBoneIndexType&gt; RequiredBones    å½“å‰æ¨¡å‹çš„ç»†èŠ‚å±‚çº§ä¸‹æ‰€éœ€è¦çš„éª¨éª¼æ‰€å¯¹åº”çš„æ¨¡å‹çš„å‚è€ƒéª¨æ¶çš„ä¸‹æ ‡ï¼šå¦‚ï¼›0, 5, 10, 13...   TSharedPtr&lt;struct FBoneContainer&gt; SharedRequiredBones    éª¨éª¼åŠ¨ç”»è®¡ç®—æ‰€éœ€çš„å…³é”®æ•°æ®ç»“æ„ï¼Œåœ¨æ­¤ç»„ä»¶ä¸Šæ‰€æœ‰åŠ¨ç”»å®ä¾‹é—´å…±äº«   éª¨éª¼å®¹å™¨  struct FBoneContainer      å®ƒæ˜¯éª¨éª¼åŠ¨ç”»è®¡ç®—çš„æ ¸å¿ƒæ•°æ®ï¼Œæ— è®ºæœ€ç»ˆåŠ¨ç”»è¡¨ç°æ—¶ï¼Œä½¿ç”¨çš„æ¨¡å‹å’Œéª¨æ¶æ˜¯ä»€ä¹ˆï¼Œåœ¨åŠ¨ç”»è®¡ç®—æ—¶ï¼Œæ‰€æœ‰åŠ¨ç”»å®ä¾‹åŠå…¶èŠ‚ç‚¹æ­£å¸¸åº”å½“åªä¼šä½¿ç”¨æ¥è‡ªBoneContainerçš„æ•°æ®   å…¶æ ¸å¿ƒæˆå‘˜å˜é‡åŠç”¨é€”ï¼š  TArray&lt;FBoneIndexType&gt;\tBoneIndicesArray    å½“å‰ç»†èŠ‚å±‚çº§ä¸‹æ‰€éœ€è¦çš„éª¨éª¼æ‰€å¯¹åº”çš„å‚è€ƒéª¨æ¶çš„ä¸‹æ ‡   TWeakObjectPtr&lt;USkeletalMesh&gt; AssetSkeletalMesh    å½“å‰ä½¿ç”¨çš„éª¨éª¼æ¨¡å‹   TWeakObjectPtr&lt;USkeleton&gt; AssetSkeleton    å½“å‰ä½¿ç”¨çš„éª¨æ¶       // @see FBoneContainer::RemapFromSkelMesh \tSkeletonToPoseBoneIndexArray = LinkupTable.SkeletonToMeshTable; \tPoseToSkeletonBoneIndexArray = LinkupTable.MeshToSkeletonTable;   TArray&lt;int32&gt; SkeletonToPoseBoneIndexArray    éª¨æ¶çš„éª¨éª¼ä¸‹æ ‡åˆ°æ¨¡å‹å‚è€ƒéª¨æ¶çš„éª¨éª¼ä¸‹æ ‡çš„æ˜ å°„ï¼ˆæ„Ÿè§‰å˜é‡åæœ‰æ­§ä¹‰ï¼Œçœ‹ä¸Šé¢çš„ä»£ç æ›´ç›´è§‚ï¼‰   TArray&lt;int32&gt; PoseToSkeletonBoneIndexArray    æ¨¡å‹å‚è€ƒéª¨æ¶çš„éª¨éª¼ä¸‹æ ‡åˆ°éª¨æ¶çš„éª¨éª¼ä¸‹æ ‡çš„æ˜ å°„ï¼ˆæ„Ÿè§‰å˜é‡åæœ‰æ­§ä¹‰ï¼Œçœ‹ä¸Šé¢çš„ä»£ç æ›´ç›´è§‚ï¼‰   TSharedPtr&lt;FSkelMeshRefPoseOverride&gt; RefPoseOverride    å‚è€ƒå§¿åŠ¿è¦†ç›–   bool bDisableRetargeting    ç¦ç”¨é‡å®šå‘çš„å¼€å…³      å¯ä»¥çœ‹åˆ°ï¼Œå®é™…æƒ…å†µæ¯”ç†æƒ³ä¸­å¤æ‚å¾—å¤šï¼Œç”±äºç³»ç»ŸåŠŸèƒ½çš„æ‹“å±•ï¼Œä¾‹å¦‚åŠ¨ç”»é€šçŸ¥å’Œé‡å®šå‘ï¼Œè¿™äº›èµ„äº§ç±»å‹è¢«åŠ å…¥äº†è®¸å¤šæ•°æ®    å¹¶ä¸”é™¤äº†éª¨æ¶èµ„äº§æœ¬èº«å¤–ï¼Œéª¨éª¼æ¨¡å‹æœ‰è‡ªå·±çš„å‚è€ƒéª¨æ¶ï¼ŒåŠ¨ç”»åºåˆ—æœ‰è‡ªå·±çš„éª¨æ¶ï¼Œè¿™å¯¼è‡´èµ„äº§é—´çš„å…³ç³»å¤æ‚äº†èµ·æ¥ï¼Œå®ƒä»¬ä¹Ÿæ˜¯éœ€è¦å¼•å…¥åŠ¨ç”»é‡å®šå‘çš„åŸå›    å®ç°æ–¹æ¡ˆ  åœ¨å¯¹ä¸Šè¿°çš„èµ„äº§å¯¹è±¡åŠä»£ç æµç¨‹ç†è§£å……åˆ†ä¹‹åï¼Œå®ç°æ–¹æ¡ˆåº”è¯¥å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼š  åŸºäºé»˜è®¤çš„USkeletalMeshComponent::InitAnimæµç¨‹ï¼Œåœ¨åˆå§‹åŒ–SharedRequiredBonesæ—¶ï¼Œæƒ³åŠæ³•è¦†ç›–SharedRequiredBones::AssetSkeletonï¼Œç„¶åå†æ‰§è¡Œåç»­æ­¥éª¤ï¼Œå³å»ºç«‹ä¸AssetSkeletalMeshçš„éª¨éª¼ä¸‹æ ‡æ˜ å°„ç­‰ï¼š  FBoneContainer::InitializeTo FBoneContainer::Initialize // ... è¦†ç›– AssetSkeleton FBoneContainer::RemapFromSkelMesh      ç›®å‰ç”±äºå¼•æ“é»˜è®¤æœªå¼€æ”¾ç›¸å…³æ¥å£ï¼Œåªèƒ½é€šè¿‡æ”¹å¼•æ“çš„æ–¹å¼å®ç°ï¼Œä¸”æœ‰å°‘é‡ä»£ç éœ€è¦é€‚é…ï¼Œå®˜æ–¹åç»­ä¹Ÿæœªå¿…ä¼šæ”¯æŒã€‚è¿™æ˜¯ç›®å‰æ–¹æ¡ˆçš„é£é™©ç‚¹   å¥—ç”¨åˆ°åƒµå°¸æ¯ç­å·¥ç¨‹ä¸­å¾·ç‰§ç¿»è¶Šçš„ä¾‹å­ï¼Œå°±æ˜¯å…ˆä½¿ç”¨å¾·ç‰§æ¨¡å‹æ‰§è¡ŒInitAnimï¼Œåœ¨åˆå§‹åŒ–SharedRequiredBonesæ—¶ï¼Œå°†è§’è‰²éª¨æ¶è¦†ç›–åˆ°AssetSkeletonï¼Œç„¶åæ‰§è¡Œåç»­FBoneContainer::RemapFromSkelMesh ï¼ˆéœ€è¦å¾·ç‰§éª¨æ¶ä¸è§’è‰²éª¨æ¶çš„å±‚çº§ç›¸ä¼¼ï¼Œä¸”å…±åŒå±‚çº§çš„éª¨éª¼åå­—ä¸€è‡´ï¼‰  ç›¸å…³æ€è€ƒ  éª¨éª¼ä¸‹æ ‡çš„æ˜ å°„æ˜¯å¦‚ä½•å»ºç«‹çš„ï¼Ÿ  é»˜è®¤é€šè¿‡éª¨éª¼åæ˜ å°„ï¼Œå³éª¨éª¼åå­—ç›¸åŒçš„éª¨éª¼ï¼Œäº’ç›¸æ˜ å°„  å‚è§ï¼š USkeleton::BuildLinkupData  CopyPoseFromMesh  å‚è§ï¼š FAnimNode_CopyPoseFromMesh::BoneMapToSource FAnimNode_CopyPoseFromMesh::Evaluate_AnyThread FAnimNode_CopyPoseFromMesh::ReinitializeMeshComponent   UPoseableMeshComponent  å‚è§ï¼š UPoseableMeshComponent::CopyPoseFromSkeletalComponent  LeaderPoseComponent  å‚è§ï¼š USkinnedMeshComponent::LeaderPoseComponent  // æ›´æ–°ä¸‹æ ‡æ˜ å°„ USkinnedMeshComponent::UpdateLeaderBoneMap  // æ¸²æŸ“ç›¸å…³ UpdateRefToLocalMatricesInner (SkeletalRender.cpp)  // è·å–éª¨éª¼å˜æ¢ USkinnedMeshComponent::GetBoneTransform      å¯ä»¥çœ‹åˆ°ï¼Œå¼•æ“é€šè¿‡ä¸‹æ ‡æ˜ å°„å®ç°äº†åå­—å„ä¸ç›¸åŒä½†ç›¸ä¼¼çš„åŠŸèƒ½    ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦å»ºç«‹å¥½ä¸‹æ ‡æ˜ å°„ï¼Œä¸€å®šç¨‹åº¦ä¸Šï¼Œå°±èƒ½åœ¨ä»»æ„æ¨¡å‹ä¸Šå¼ºåˆ¶å…±äº«åŠ¨ç”»   æ›´æ–°é€Ÿç‡ä¼˜åŒ–ï¼ˆUROï¼‰  åˆ¤æ–­æ˜¯å¦å¯è·³è¿‡æ›´æ–°  å‚è§ï¼š USkinnedMeshComponent::TickUpdateRate FAnimUpdateRateManager::TickUpdateRateParameters USkeletalMeshComponent::ShouldTickAnimation  FAnimUpdateRateParameters::SetTrailMode   æ’å€¼éª¨éª¼æ•°æ®  å‚è§ï¼š USkeletalMeshComponent::RefreshBoneTransforms USkeletalMeshComponent::ParallelAnimationEvaluation USkeletalMeshComponent::ParallelDuplicateAndInterpolate FAnimationRuntime::LerpBoneTransforms   å½“åŠ¨ç”»è“å›¾çš„å›¾è¡¨ä¸ºç©ºæ—¶ï¼ŒåŠ¨ç”»è®¡ç®—çš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ  å‚è€ƒå§¿åŠ¿  å‚è§ï¼š UAnimInstance::ParallelEvaluateAnimation FPoseContext::ResetToRefPose FBaseCompactPose::ResetToRefPose FBoneContainer::FillWithCompactRefPose   CacheBones_AnyThreadç¼“å­˜çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Ÿ  å‚è€ƒå§¿åŠ¿çš„éª¨éª¼æ•°æ®  å‚è§ï¼š UAnimInstance::ParallelEvaluateAnimation FAnimInstanceProxy::EvaluateAnimation_WithRoot FAnimInstanceProxy::CacheBones / FAnimInstanceProxy::CacheBones_WithRoot   å‚è€ƒå§¿åŠ¿å¦‚ä½•ä¸åŠ¨ç”»åºåˆ—çš„æ•°æ®æ··åˆ/äº¤äº’/åº”ç”¨  éª¨éª¼æ•°æ®è§£å‹æµç¨‹ï¼š UAnimSequence::GetAnimationPose UAnimSequence::GetBonePose UE::Anim::Decompression::DecompressPose  // ACLImpl.h      è·Ÿå‹ç¼©ç®—æ³•æœ‰å…³ï¼šå¦‚æœåŠ¨ç”»æ•°æ®åœ¨å‹ç¼©æ—¶æ²¡æœ‰å‰”é™¤å‚è€ƒå§¿åŠ¿çš„æ•°æ®ï¼Œå³å…¨é‡æ•°æ®å‹ç¼©ï¼Œåˆ™åŠ¨ç”»åºåˆ—çš„éª¨éª¼æ•°æ®ä¼šè¦†ç›–æ‰å‚è€ƒå§¿åŠ¿ã€‚æ—§ç‰ˆå‹ç¼©ç®—æ³•å°±æ˜¯å¦‚æ­¤ã€‚    åœ¨è™šå¹»å¼•æ“5.3ç‰ˆæœ¬åï¼ŒåŠ¨ç”»çš„é»˜è®¤å‹ç¼©ç®—æ³•åˆ‡æ¢åˆ°äº†ACLï¼Œé»˜è®¤é…ç½®ä¸‹ï¼Œå®ƒåœ¨å‹ç¼©åŠ¨ç”»æ—¶ï¼Œä¼šå‰”é™¤å‚è€ƒå§¿åŠ¿æ•°æ®ï¼Œç›¸å¯¹å®ƒè¿›è¡Œå¢é‡æ•°æ®å‹ç¼©ï¼Œå¢é‡ä¸ºé›¶ï¼Œå³æ•°æ®ä¸å‚è€ƒå§¿åŠ¿ä¸€è‡´çš„è½¨é“ä¼šè¢«è·³è¿‡ï¼› å¯¹åº”çš„ï¼Œè§£å‹æ—¶ä¹Ÿä¼šè·³è¿‡æ•°æ®ä¸å‚è€ƒå§¿åŠ¿æ•°æ®ä¸€è‡´çš„è½¨é“ã€‚æ‰€ä»¥å®ƒå¯ä»¥åšåˆ°å‹ç¼©ç‡æ›´é«˜ï¼Œè§£å‹é€Ÿåº¦æ›´å¿«ã€‚ä¹Ÿå› ä¸ºå¦‚æ­¤ï¼Œè§£å‹æ—¶éœ€è¦è·å–å‚è€ƒå§¿åŠ¿çš„ä¿¡æ¯ã€‚   æ¢ç´¢  ç»™å®šä¸€ä¸ªéª¨éª¼ä¸‹æ ‡ï¼Œå¦‚ä½•æœ€å¿«åˆ¤æ–­å®ƒæ˜¯å¦æ¥è‡ªä¸€ä¸ªè™šæ‹Ÿéª¨éª¼ï¼Ÿ  ç¦ç”¨é‡å®šå‘ä¸”ä½¿ç”¨ACLå‹ç¼©æ—¶ï¼Œå‚è€ƒå§¿åŠ¿ä¸åŒçš„ï¼Œæ¯”ä¾‹æ¥è¿‘çš„éª¨éª¼æ¨¡å‹ï¼Œæ’­æ”¾åŒä¸€åŠ¨ç”»åºåˆ—æ—¶ï¼ŒåŠ¨ç”»ç»“æœæ˜¯å¦ä¼šä¸€è‡´ï¼Ÿ  å¦‚æœåå­—ä¸åŒçš„éª¨éª¼ä¹Ÿèƒ½äº’ç›¸æ˜ å°„ä¸‹æ ‡ï¼Œä¼šæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"
  },
  
  {
    "title": "æˆ‘å¯¹5.6ä¸­ Unreal Animation Framework çš„ç†è§£",
    "url": "/posts/My-understanding-of-Unreal-Animation-Framework-in-5.6/",
    "categories": "Unreal Engine, Animation",
    "tags": "gameplay, animation, tutorial",
    "date": "2025-08-05 01:50:00 +0800",
    "content": "çº¦ä¸¤ä¸ªæœˆå‰ï¼ŒUnreal Festä¸­çš„å·«å¸ˆ4æŠ€æœ¯æ¼”ç¤ºä¸ºæˆ‘ä»¬å±•ç¤ºäº†è™šå¹»å¼•æ“ä¸‹ä¸€ä»£åŠ¨ç”»ç³»ç»Ÿï¼ˆUnreal Animation Framworkï¼Œä¸‹æ–‡ç®€ç§°UAFã€‚åŒæ—¶æŠŠåŸæ¥çš„åŠ¨ç”»è“å›¾ç³»ç»Ÿç®€ç§°ä¸ºABPï¼‰ï¼Œä¹Ÿå¼•èµ·äº†æˆ‘å¼ºçƒˆçš„å¥½å¥‡å¿ƒï¼Œæ„Ÿè§‰æ˜¯æ—¶å€™å¥½å¥½äº†è§£ä¸‹è¿™ä¸ªç³»ç»Ÿäº†  æœ¬æ–‡ä¼šä»ç¨‹åºæ¡†æ¶çš„è§’åº¦åˆ†ææ­¤ç³»ç»Ÿ ä¸»è¦ä»‹ç»ç³»ç»Ÿçš„æ„æˆï¼Œå„ä¸ªç±»å‹çš„å«ä¹‰ï¼Œå®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶ç†è§£å’Œå…¥æ‰‹è¿™ä¸ªæ–°åŠ¨ç”»ç³»ç»Ÿ ä½†ä¸ä¼šæ¶‰åŠå¦‚åŠ¨ç”»æ··åˆçš„è®¡ç®—ï¼Œæˆ–æ˜¯åŠ¨ç”»é‡å®šå‘ç­‰ç»†èŠ‚  ç®€å•è¿è¡Œæ¼”ç¤º  å…ˆçœ‹ä¸€ä¸ªç®€å•çš„è¿è¡Œç¤ºä¾‹ï¼š    è§†é¢‘ä¸­æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å±‚æ··åˆæ•ˆæœï¼Œä¸ŠåŠèº«æ¥è‡ªæ‹‰å¼“åŠ¨ç”»çš„é™å¸§ï¼Œä¸‹åŠèº«ä½¿ç”¨å¾ªç¯çš„å†²åˆºåŠ¨ç”»ï¼Œ  BlendMaskä½¿ç”¨äº†ä¸€ä¸ªHierarchyTable:       å®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„å±‚çº§æ•°æ®å®¹å™¨ï¼Œè¿™é‡Œç”¨ä½œBlendProfile   ä»å·¦è§†å›¾å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªæ¨¡å‹å®Œå…¨é‡åˆï¼ŒåŠ¨ç”»æ•ˆæœå®Œå…¨ä¸€è‡´ï¼š    å› ä¸ºå®ƒä»¬ä¸¤ä¸ªè¿è¡Œäº†ç›¸åŒçš„UAFçš„åŠ¨ç”»å›¾è¡¨ï¼š       å·¦ä¸Šæ˜¯ä¸‹åŠèº«åŠ¨ç”»ï¼Œå·¦ä¸‹æ˜¯ä¸ŠåŠèº«åŠ¨ç”»ï¼Œå³è¾¹æ˜¯åˆ†å±‚æ··åˆ   ä¸åŒçš„æ˜¯ï¼Œå·¦è¾¹ä½¿ç”¨äº†UAFæ¡†æ¶æ›´æ–°ä¸Šè¿°å›¾è¡¨ï¼š       è¿™é‡Œçš„èŠ‚ç‚¹è°ƒç”¨å¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„å®ç°ï¼Œä½†ç”¨äºç®€å•çš„æ¼”ç¤ºè¶³å¤Ÿäº†   å³è¾¹ä½¿ç”¨äº†ABPæ›´æ–°ä¸Šè¿°å›¾è¡¨ï¼š       UAFçš„åŠ¨ç”»å›¾è¡¨ç›®å‰å¯é€šè¿‡è¿™ä¸ªç‰¹æ®ŠåŠ¨ç”»èŠ‚ç‚¹é›†æˆåˆ°åŠ¨ç”»è“å›¾   ç»Ÿä¸€çš„å·¥ä½œåŒºç•Œé¢ Workspace  UAFæ¥å…¥äº†å·¥ä½œåŒºç¼–è¾‘å™¨ï¼Œæä¾›äº†å¤šä¸ªèµ„äº§çš„é›†æˆè§†å›¾ï¼Œ å·¥ä½œåŒºè‡ªèº«ä¹Ÿæœ‰ä¸€ä¸ªå¯¹åº”èµ„äº§ï¼Œç±»å‹ä¸ºUAF Workspaceï¼Œåº”è¯¥æ˜¯ç”¨äºå­˜æ”¾å·¥ä½œåŒºç›¸å…³çš„å…ƒæ•°æ®     å·¥ä½œåŒºç¼–è¾‘å™¨æ¨¡å—æ¥è‡ªæ–°çš„å®éªŒæ€§æ’ä»¶Workspaceï¼Œå®ƒå…è®¸å¤šç§èµ„äº§åœ¨ä¸€ä¸ªç»Ÿä¸€çš„ç•Œé¢ä¸­è¢«ç¼–è¾‘    UAFæ¥å…¥äº†è¿™ä¸ªåŠŸèƒ½ï¼ŒæŒ‡å®šäº†UAFç›¸å…³çš„èµ„äº§ç±»å‹å¯ä»¥åœ¨åŒä¸€ä¸ªå·¥ä½œåŒºä¸‹ç¼–è¾‘    è¯¦è§ï¼šUAnimNextWorkspaceSchema, IWorkspaceEditorModule::RegisterObjectDocumentType   å·¦ä¸Šè§’çš„workspaceé€‰é¡¹å¡ï¼Œåˆ—å‡ºäº†åœ¨å½“å‰å·¥ä½œåŒºæ‰“å¼€çš„èµ„äº§ï¼š    å³AG_SequencePlayer, UAFM_Moduleï¼Œå’Œå·¥ä½œåŒºè‡ªèº«çš„èµ„äº§ï¼šUAFW_Workspaceï¼š    ç³»ç»Ÿç»„æˆ     ä»¥ä¸‹è£¸cppç±»å‹åŸºæœ¬éƒ½ä½äºUE::AnimNextåå­—ç©ºé—´ä¸‹   UAFçš„é€»è¾‘è½½ä½“ç›®å‰ç”±ä¸¤å¤§å—ç»„æˆï¼šModuleå’ŒAnimationGraphï¼Œéƒ½è¿è¡ŒäºRigVMä¹‹ä¸­ï¼Œæ”¯æŒå¤šçº¿ç¨‹æ‰§è¡Œ      å…¶ä¸­çº¿ç¨‹é—´çš„æ•°æ®äº¤äº’ï¼Œé€šè¿‡UAnimNextComponent::PublicVariablesProxyå®Œæˆ  FAnimNextPublicVariablesProxyæ³¨é‡Šä¸­æœ‰å†™åˆ°ï¼Œç›®å‰æ˜¯æ¯å¸§æ‹·è´è„æ ‡è®°è¿‡çš„æ•°æ®ï¼Œå°†æ¥è®¡åˆ’æ”¹æˆåŒç¼“å†²æ•°ç»„(å‚è€ƒUSkinnedMeshComponent::ComponentSpaceTransformsArray)     è¯¦è§ï¼š    FAnimNextModuleInstance::CopyProxyVariables    IAnimNextVariableProxyHost::FlipPublicVariablesProxy    UAnimNextComponent::SetVariable    UAnimNextComponentWorldSubsystem::Register   Module  æ¨¡å—åœ¨è¿™é‡Œæ˜¯ä½¿ç”¨å„ä¸ªå‡½æ•°ç¼–å†™é€»è¾‘ä¸šåŠ¡çš„åœ°æ–¹ï¼Œç±»ä¼¼ABPé‡Œçš„è“å›¾éƒ¨åˆ†/UAnimInstance::NativeUpdateAnimation,UAnimInstance::NativeThreadSafeUpdateAnimationï¼Œä½†æ›´åŠ å¼ºå¤§ï¼Œçµæ´»  FRigUnit_AnimNextModuleEventBaseï¼š    é€šè¿‡åŸºç±»æä¾›çš„æ¥å£ï¼Œæ¯ä¸ªæ¨¡å—å¯ä»¥é€‰æ‹©æ˜¯å¦éœ€è¦ç‹¬ç«‹çš„TickFunctionï¼Œè¦è¿è¡Œåœ¨å“ªä¸ªTick Groupï¼Œæ˜¯å¦è¿è¡Œåœ¨æ¸¸æˆçº¿ç¨‹ç­‰åŠŸèƒ½  UAFçš„ç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆéƒ¨åˆ†æ¨¡å—ï¼Œæ¯”å¦‚å˜é‡ç»‘å®šç›¸å…³çš„FRigUnit_AnimNextExecuteBindings_GT FRigUnit_AnimNextExecuteBindings_WT  AnimationGraph  åŠ¨ç”»å›¾è¡¨æ˜¯åŠ¨ç”»é€»è¾‘åŠå…¶æ•°æ®çš„é›†åˆï¼Œç±»ä¼¼ABPé‡Œçš„åŠ¨ç”»æ ‘  ä¸ä¸€æ ·çš„æ˜¯ï¼ŒUAFé‡Œä¸å†æœ‰å„å¼å„æ ·çš„åŠ¨ç”»èŠ‚ç‚¹ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªTraitStackèŠ‚ç‚¹åŠ ä¸Šå„ç§å„æ ·çš„Traitçš„ç»„åˆ  åŠ¨ç”»å›¾è¡¨è‡ªèº«ä½œä¸ºUObjectï¼Œä¹Ÿæ‰¿æ‹…ç€æŒæœ‰å›¾è¡¨ä¸­å…±äº«æ•°æ®çš„UObjectå¯¹è±¡å¼•ç”¨ï¼Œä¸è®©å®ƒä»¬è¢«GCçš„åŠŸèƒ½     è¯¦è§ï¼š    UAnimNextAnimationGraph::GraphReferencedObjects    UAnimNextAnimationGraph::GraphReferencedSoftObjects   å¦å¤–åŠ¨ç”»å›¾è¡¨å¯ä»¥æœ‰å¤šå…¥å£ï¼Œè€Œä¸åªæ˜¯Root  TraitStackå’ŒTraitStackèŠ‚ç‚¹  TraitStackï¼šé¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±Traitç»„æˆçš„æ ˆç»“æ„ï¼Œè¿™ä¸ªæ ˆåŒ…å«1ä¸ªbase traitå’Œè‹¥å¹²ä¸ªadditive trait  è€Œä¸å®ƒå¯¹åº”çš„èŠ‚ç‚¹ï¼Œåªæ˜¯ä¸€ä¸ªæ­£å¸¸çš„RigUnitèŠ‚ç‚¹ï¼ˆç»“æ„ä½“ï¼‰ï¼š    ä¸€ä¸ªTraitStackèŠ‚ç‚¹å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªTraitStack  åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œå°±æ˜¯ä¸Šæ–‡åˆ†å±‚æ··åˆå›¾è¡¨ä¸­çš„æ ·å­     èŠ‚ç‚¹å½¢å¼åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç¼–è¾‘å™¨ä¸‹çš„å¯è§†åŒ–ï¼Œç¼–è¯‘åä¼šæŠŠå¯¹åº”çš„TraitStackåºåˆ—åŒ–åˆ°åŠ¨ç”»å›¾è¡¨ä¸­ï¼Œè¿™ä¸ªRigUnitèŠ‚ç‚¹å¹¶ä¸ä¼šè¢«æ‰§è¡Œ   Trait  ç›´è¯‘ä¸ºç‰¹æ€§ï¼Œç†è§£ä¸ºåŠ¨ç”»é€»è¾‘ä¸­å¯å¤ç”¨çš„åŠŸèƒ½ï¼Œç±»ä¼¼ABPä¸­çš„åŠ¨ç”»èŠ‚ç‚¹ï¼Œä½†åŒæ ·çš„ï¼Œæ›´ä¸ºå¼ºå¤§ï¼Œçµæ´»  FTrait  FTraitæ˜¯æ‰€æœ‰Traitçš„åŸºç±»ï¼Œå®šä¹‰äº†æ‰€éœ€çš„åŸºç¡€æ¥å£ï¼Œæ¯”å¦‚è·å–å…¶å”¯ä¸€ID    å­Traitç”±FBaseTraitæˆ–FAdditiveTraitåŠ ä¸ŠITraitInterfaceçš„å­æ¥å£ç±»ç»„åˆè€Œæ¥ï¼Œ      ITraitInterfaceæ˜¯æ‰€æœ‰trait interfaceçš„åŸºç±»ï¼Œ    å®ƒé‡Œé¢åªæœ‰ä¸€ä¸ªè·å–UIDçš„æ–¹æ³•ï¼Œå³æ¯ä¸ªtrait interfaceä¹Ÿæœ‰å”¯ä¸€ID  ç›®å‰è¿™ä¸¤ä¸ªå”¯ä¸€IDéƒ½æ˜¯å¯¹ç±»ååº”ç”¨FNV1aå“ˆå¸Œç®—æ³•å¾—æ¥ï¼Œ è¿™ä¸ªç®—æ³•çš„ç‰¹ç‚¹æ˜¯ï¼Œå¯¹äºåŒæ ·çš„å­—ç¬¦ç»„åˆï¼Œæ— è®ºå­—ç¬¦æ˜¯æ™®é€šå­—ç¬¦æˆ–æ˜¯å®½å­—ç¬¦ï¼Œä¸ä¼šå½±å“å“ˆå¸Œç»“æœï¼Œäº§ç”Ÿçš„å“ˆå¸Œå€¼ç›¸åŒï¼Œå¹¶ä¸”ç®€å•é«˜æ•ˆ     è¯¦è§ï¼š    FTraitUID::MakeUID    FTraitInterfaceUID::MakeUID   Traitå¯¹è±¡æœ¬èº«ä¸èƒ½æœ‰å†…éƒ¨çŠ¶æ€ï¼Œå³æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒä»¬çš„é€»è¾‘ä¼šè·‘åœ¨å·¥ä½œçº¿ç¨‹ä¸­ï¼ˆæ¯”å¦‚åŒä¸€å¸§ï¼Œå¤šä¸ªå¤ç”¨åŒä¸€åŠ¨ç”»å›¾è¡¨çš„å¯¹è±¡ï¼Œåœ¨ä¸åŒçš„çº¿ç¨‹æ‰§è¡Œï¼‰  å®ƒçš„çŠ¶æ€æ•°æ®åº”è¯¥é€šè¿‡FSharedDataå’ŒFInstanceDataè¿™ä¸¤ä¸ªç±»å‹åˆ«åæ¥å£°æ˜ï¼ŒUAFç³»ç»Ÿä¼šåœ¨Traitå¯¹è±¡å¤–éƒ¨åˆ†é…å¥½    FSharedDataæ˜¯åŒä¸€åŠ¨ç”»å›¾è¡¨çš„å¤šä¸ªå®ä¾‹å¯ä»¥å…±äº«çš„åªè¯»æ•°æ®ï¼Œæ˜¯USTRUCTï¼Œä¼šåºåˆ—åŒ–ä¿å­˜åˆ°æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ä¸€äº›ç¡¬ç¼–ç çš„é…ç½®  FInstanceDataæ˜¯æ¯ä¸ªåŠ¨ç”»å›¾è¡¨å®ä¾‹ä¸­çš„èŠ‚ç‚¹æ‰€éœ€çš„åŠ¨æ€æ•°æ®ï¼Œæ˜¯è£¸CPPç»“æ„ä½“     FSharedDataç±»ä¼¼äºABPä¸­çš„FoldPropertyï¼Œ    è€ŒInstanceDataçš„æœºåˆ¶ä¸StateTreeä¸­çš„FInstanceDataType/UInstanceDataTypeå‡ ä¹ä¸€è‡´   ä»£ç ç”Ÿæˆ  UAFä½¿ç”¨äº†ä¸€äº›å®ï¼Œæ¥ç®€å•å¿«é€Ÿçš„ç”Ÿæˆæ¡†æ¶æ‰€éœ€çš„ä»£ç ï¼Œå‡å°‘é‡å¤åŠ³åŠ¨  Trait Interfaceçš„å®  trait interfaceè¿™è¾¹ï¼Œæ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸¤ä¸ªå®  DECLARE_ANIM_TRAIT_INTERFACE å£°æ˜å¹¶å®ç°GetInterfaceUIDï¼Œè¿”å›ç¼–è¯‘æœŸå¸¸é‡ï¼š      AUTO_REGISTER_ANIM_TRAIT_INTERFACE é™æ€æ³¨å†Œtrait interfaceç±»çš„å…±äº«æŒ‡é’ˆåˆ°å…¨å±€trait interfaceæ³¨å†Œè¡¨ï¼š    Traitçš„å®  Traitè¿™è¾¹ç›¸å¯¹å°±å¤æ‚å¾ˆå¤šï¼š  é¦–å…ˆéœ€è¦åœ¨traitç±»ä¸­ä½¿ç”¨DECLARE_ANIM_TRAITå®ï¼Œå£°æ˜ä¸€äº›æ¥å£çš„è¦†å†™ï¼š    å…¶åŒ…å«çš„å‡ ä¸ªåµŒå¥—å®ï¼š  ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_BASIC å£°æ˜å¹¶å®ç°GetTraitUIDï¼Œè¿”å›ç¼–è¯‘æœŸå¸¸é‡ï¼›GetTraitNameè¿”å›traitåå­—ï¼›å£°æ˜TraitSuperåˆ«å  ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_INSTANCING_SUPPORT traitæ•°æ®ç›¸å…³çš„å£°æ˜  ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_INTERFACE_SUPPORT trait interfaceè·å–ç›¸å…³çš„å£°æ˜  ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_EVENT_SUPPORT traitäº‹ä»¶ç›¸å…³çš„å£°æ˜  ANIM_NEXT_IMPL_DECLARE_ANIM_TRAIT_LATENT_PROPERTY_SUPPORT Latent Propertyç›¸å…³çš„å£°æ˜ï¼ˆå«ä¹‰è§ä¸‹æ–‡Latent Propertyï¼‰  ç„¶åä½¿ç”¨GENERATE_ANIM_TRAIT_IMPLEMENTATIONå®ï¼Œå®šä¹‰ä¸Šè¿°æ¥å£ï¼Œ    æ¯”è¾ƒç‰¹åˆ«çš„æ˜¯InterfaceEnumeratorMacro, RequiredInterfaceEnumeratorMacro, EventEnumeratorMacroè¿™ä¸‰ä¸ªå‚æ•°ï¼Œ ä»åå­—å¯ä»¥çœ‹å‡ºå®ƒä»¬æ˜¯EnumeratorMacroï¼Œæ˜¯ç”¨äºæšä¸¾çš„å®ï¼Œæšä¸¾çš„ä¸œè¥¿æ˜¯å®ƒä»¬çš„å‰ç¼€ï¼štrait interfaceï¼Œå¿…é¡»çš„trait interfaceï¼Œtraitäº‹ä»¶  æšä¸¾å®æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿæ˜¯å®ï¼Œè¿™ä¸ªå®æ¥æ”¶æšä¸¾çš„ä¸œè¥¿ä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œ  ä»¥FBlendTwoWayTraitä¸ºä¾‹ï¼š      å±€éƒ¨å®šä¹‰çš„TRAIT_INTERFACE_ENUMERATORå®ï¼Œæšä¸¾äº†FBlendTwoWayTraitå®ç°çš„æ‰€æœ‰çš„trait interfaceï¼Œ å¹¶æŠŠè¿™äº›æ¥å£ä¼ ç»™äº†GeneratorMacroè¿™ä¸ªå‚æ•°  ç»“åˆGENERATE_ANIM_TRAIT_IMPLEMENTATIONä¸­åµŒå¥—çš„å®ï¼š  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT å®šä¹‰å…±äº«æ•°æ®å’Œå®ä¾‹æ•°æ®çš„å†…å­˜å¤§å°å’Œå¯¹å…¶ï¼Œæ„é€ å’Œææ„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_LATENT_PROPERTY_MEMORY_LAYOUT å®šä¹‰è·å–Latent Propertyçš„å†…å­˜å¸ƒå±€ä¿¡æ¯çš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_IS_PROPERTY_LATENT å®šä¹‰åˆ¤å®šå¯¹åº”åå­—çš„å±æ€§æ˜¯å¦ä¸ºLatent Propertyçš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_INTERFACE å®šä¹‰è·å–æŒ‡å®štrait interfaceæŒ‡é’ˆçš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_INTERFACES å®šä¹‰è·å–æ‰€æœ‰å®ç°çš„trait interfaceçš„IDçš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_REQUIRED_INTERFACES å®šä¹‰è·å–æ‰€æœ‰å¿…é¡»çš„trait interfaceçš„IDçš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_ON_TRAIT_EVENT å®šä¹‰å“åº”æ‰€éœ€traitäº‹ä»¶å›è°ƒçš„å‡½æ•°  ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT_GET_TRAIT_EVENTS å®šä¹‰è·å–æ‰€æœ‰å“åº”çš„traitäº‹ä»¶çš„IDçš„å‡½æ•°  è‡³æ­¤ï¼Œä¾¿å¯è‡ªåŠ¨ç”Ÿæˆæ¡†æ¶æ‰€éœ€çš„traitå®šä¹‰  AUTO_REGISTER_ANIM_TRAITï¼Œä¸AUTO_REGISTER_ANIM_TRAIT_INTERFACEç±»ä¼¼ï¼Œåªä¸è¿‡è¿™æ¬¡æ³¨å†Œçš„æ˜¯trait     traitæ³¨å†Œæ²¡æœ‰ä½¿ç”¨å…±äº«æŒ‡é’ˆï¼Œè€Œæ˜¯åœ¨UE::AnimNext::TraitConstructorFuncå›è°ƒä¼ å…¥çš„DestPtråœ°å€æ„é€    Latent Property  Latent Propertyæ˜¯å…±äº«æ•°æ®ä¸­éœ€è¦å®ä¾‹åŒ–çš„éƒ¨åˆ†ï¼Œæ”¾åœ¨å®ä¾‹åŒ–æ•°æ®åŒºçš„åé¢  å¯¹äºç»§æ‰¿è‡ªFAnimNextTraitSharedDataçš„å…±äº«æ•°æ®ï¼Œéœ€è¦ç”¨GENERATE_TRAIT_LATENT_PROPERTIESå®ï¼Œæ‰‹åŠ¨é€‰æ‹©æ€§æ³¨å†Œéœ€è¦æ ‡è®°ä¸ºLatent Propertyçš„å±æ€§ï¼š    è¿™ä¸ªå®åŒæ ·ä½¿ç”¨äº†æšä¸¾å®ä½œä¸ºå‚æ•°ï¼Œå…¶ä¸­å®ƒåµŒå¥—çš„å®ï¼š  ANIM_NEXT_IMPL_DEFINE_LATENT_CONSTRUCTOR ä½¿ç”¨placement newï¼Œé€ä¸ªæ„é€ Latent Property (å†…å­˜åœ°å€çš„è§åæ–‡FNodeInstanceè¿™èŠ‚)     è¯¦è§ï¼šFExecutionContext::AllocateNodeInstance åˆ†é…å†…å­˜ï¼Œæ„é€ å®ä¾‹åŒ–æ•°æ®ï¼Œä»¥åŠLatent Property    GENERATE_ANIM_TRAIT_IMPLEMENTATION-ANIM_NEXT_IMPL_DEFINE_ANIM_TRAIT-ConstructTraitInstance    GENERATE_TRAIT_LATENT_PROPERTIES-ANIM_NEXT_IMPL_DEFINE_LATENT_CONSTRUCTOR-ConstructLatentProperties   ANIM_NEXT_IMPL_DEFINE_LATENT_DESTRUCTOR é€ä¸ªææ„Latent Property  ANIM_NEXT_IMPL_DEFINE_GET_LATENT_PROPERTY_INDEX æŸ¥è¯¢å¯¹åº”åç§»é‡çš„Latent Propertyä¸‹æ ‡     FAnimNextTraitSharedData::GetLatentPropertyIndex æ³¨é‡Šä¸­æåˆ°ï¼šå¦‚æœå¯¹åº”åç§»é‡çš„Latent Propertyèƒ½æ‰¾åˆ°ï¼Œåˆ™è¿”å›ä»1å¼€å§‹æ•°çš„ä¸‹æ ‡ï¼›æ‰¾ä¸åˆ°åˆ™è¿”å›Latent Propertyçš„æ•°é‡ï¼Œæ•°å€¼å°äºç­‰äº0ï¼ˆéœ€è¦å–è´Ÿå·ï¼‰   ANIM_NEXT_IMPL_DEFINE_LATENT_GETTER ä¸ºæ¯ä¸ªLatent Propertyç”Ÿæˆä»FTraitBindingä¸­è·å–å±æ€§å€¼çš„getterå‡½æ•°     å®é­”æ³•ï¼ä½¿ç”¨äº†constexprå‡½æ•°GetLatentPropertyIndexè·å–åˆ°LatentPropertyIndexï¼Œç„¶åä»Bindingä¸­è·å¾—Latent Propertyå¼•ç”¨   TraitEvent traitäº‹ä»¶  FAnimNextTraitEventæ˜¯traitäº‹ä»¶çš„åŸºç±»    DECLARE_ANIM_TRAIT_EVENT ä¸traitå’Œtrait interfaceç±»ä¼¼ï¼Œå£°æ˜å’Œå®šä¹‰äº†EventUIDï¼Œå¹¶ä¸”è¿˜é¢å¤–æ”¯æŒIsAçš„åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„RTTIçš„æ›¿ä»£æœºåˆ¶     ç”±äºFAnimNextTraitEventæ˜¯USTRUCTï¼Œè‡ªå®šä¹‰çš„IsAåº”è¯¥ä¸æ˜¯å¿…è¦çš„ï¼Œè¿™é‡Œå¯èƒ½æ˜¯å‡ºäºæ€§èƒ½æˆ–å…¶å®ƒè€ƒè™‘   traitäº‹ä»¶ç±»ä¼¼UIçš„ç‚¹å‡»äº‹ä»¶ï¼Œå¯ä»¥è¢«æ ‡è®°ä¸ºHandledï¼Œå¹¶ä¸”å¯ä»¥è®¾å®šæœ‰æ•ˆæ—¶é—´æˆ–è€…æ— é™æ—¶é—´ç­‰  å…¨å±€æ³¨å†Œè¡¨  FTraitRegistry  traitå¯¹è±¡çš„å…¨å±€æ³¨å†Œè¡¨  ä½¿ç”¨å®æ³¨å†Œtraitæ—¶ï¼ŒFTraitRegistry ä¼˜å…ˆä½¿ç”¨é»˜è®¤åˆ†é…çš„8KBå¤§å°çš„StaticTraitBufferæ¥å­˜æ”¾traitï¼Œè¶…å‡ºåä½¿ç”¨DynamicTraitså­˜æ”¾ï¼Œæ˜¯ä¸€ä¸ªå†…å­˜å±€éƒ¨æ€§çš„ä¼˜åŒ–     è¿™é‡Œæœ‰ä¸ªæœ‰è¶£çš„å°ç»†èŠ‚ï¼ŒDynamicTraitsæ•°ç»„å­˜æ”¾çš„æ˜¯uintptr_tè€Œä¸æ˜¯void*æˆ–è€…FTrait*ï¼Œå³é€‰æ‹©äº†ç”¨æ•´æ•°å­˜æ”¾æŒ‡é’ˆ    å› ä¸ºç”¨æ•´æ•°ï¼Œå°±å¯ä»¥åŒæ—¶å­˜æ”¾æ•°ç»„ä¸‹æ ‡ï¼Œä»¥å®ç°åç»­çš„FreeListæœºåˆ¶ï¼š    DynamicTraitFreeIndexHeadæœ‰æ•ˆæ—¶ï¼ŒDynamicTraits[DynamicTraitFreeIndexHead]å­˜æ”¾çš„æ˜¯ä¸‹ä¸€ä¸ªå¯å¤ç”¨çš„æ•°ç»„å…ƒç´    å¦å¤–è¿˜å­˜äº†å‡ ä¸ªMapç”¨äºåŠ é€ŸæŸ¥è¯¢  FTraitRegistry::Register ç”¨äºæ³¨å†Œtraitåˆ°DynamicTraits  FTraitInterfaceRegistry  trait interfaceå¯¹è±¡çš„å…¨å±€æ³¨å†Œè¡¨  å¯¹æ¯”ä¸‹æ¥ï¼ŒFTraitInterfaceRegistryå°±æ˜¾å¾—æœ´å®æ— åï¼Œåªæ˜¯ä¸€ä¸ªinterface IDåˆ°æ™ºèƒ½æŒ‡é’ˆçš„map  Node èŠ‚ç‚¹     ç²—ç•¥çš„å†…å­˜å¸ƒå±€è§†å›¾ï¼Œç”¨drawioç»˜åˆ¶   è¿™èŠ‚ä»‹ç»ä¸€äº›è·ŸèŠ‚ç‚¹ç›¸å…³çš„å…³é”®ç±»å‹  FNodeTemplate  ä¸€ä¸ªFNodeTemplateå°±æ˜¯ä¸€ç»„traitçš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥æœ‰å¤šç»„base + additivetraitï¼Œæ‰€æœ‰åŠ¨ç”»å›¾è¡¨å…±äº«æ­¤æ¨¡æ¿å¯¹è±¡    ç»„æˆèŠ‚ç‚¹æ¨¡æ¿çš„traitä»¬ï¼Œä»¥FTraitTemplateçš„å¯¹è±¡å½¢å¼å­˜æ”¾åœ¨FNodeTemplateå¯¹è±¡æœ«å°¾çš„è¿ç»­å†…å­˜å¤„       FNodeTemplateBuilder::BuildNodeTemplate åœ¨ä¸€ä¸ªTArray&lt;uint8&gt;çš„è¿ç»­ç¼“å†²åŒºä¸­æ„é€ FNodeTemplateå¯¹è±¡åŠå…¶ä¸­åŒ…å«çš„FTraitTemplate   ä»å®ƒå¯ä»¥è·å–UIDï¼Œtraitæ•°ç»„é¦–åœ°å€ï¼Œtraitæ•°é‡ç­‰ä¿¡æ¯     FNodeTemplate::NodeSharedDataSize æ‰€æœ‰traitçš„å…±äº«æ•°æ®ï¼ˆåŠ ä¸Šå…¶ä¸­base traitçš„FLatentPropertiesHeaderï¼‰ï¼Œå¯¹é½ä¹‹åçš„å¤§å°   FNodeTemplate::NodeInstanceDataSize æ‰€æœ‰traitçš„å®ä¾‹æ•°æ®ï¼Œå¯¹é½ä¹‹åçš„å¤§å°     FTraitTemplate  FTraitTemplateå°±æ˜¯èŠ‚ç‚¹æ¨¡æ¿é‡Œçš„traitï¼Œç”¨å®ƒé™¤äº†å¯ä»¥è·å–åˆ°å…³äºtraitçš„UIDï¼Œtraitç±»å‹ï¼Œå…±äº«/å®ä¾‹æ•°æ®ï¼Œå­traitæ•°é‡ï¼ŒLatent Propertyæ•°é‡ç­‰åŸºæœ¬ä¿¡æ¯å¤–ï¼Œè¿˜å¯ä»¥è·å–åˆ°å…±äº«æ•°æ®çš„åç§»é‡ï¼Œå…±äº«çš„latent propertyçš„æ•°ç»„æŒ‡é’ˆåç§»é‡ä»¥åŠå®ä¾‹æ•°æ®çš„åç§»é‡       è¯¦è§ï¼šFNodeTemplate::Finalize      æˆ‘è§‰å¾—FTraitTemplate::GetTraitDescriptionè¿™ä¸¤ä¸ªæˆå‘˜å‡½æ•°å‘½åæœ‰ç‚¹å®¹æ˜“æ··æ·†ï¼Œæ›´å¥½ç†è§£çš„å‘½ååº”è¯¥æ˜¯GetTraitSharedDataï¼Œç”¨äºè·å–traitçš„å…±äº«æ•°æ®æŒ‡é’ˆï¼Œå¯èƒ½æ˜¯ç¬”è¯¯æˆ–è€…æ˜¯æ”¹åäº†   FNodeDescription  åœ¨ä¸€ä¸ªåŠ¨ç”»å›¾è¡¨å†…å”¯ä¸€çš„åªè¯»æ•°æ®ï¼Œå¯¹è±¡æœ¬èº«è™½ç„¶æ˜¯8å­—èŠ‚å¤§å°ï¼Œä½†åˆ†é…å†…å­˜æ—¶ï¼ŒåŠ ä¸ŠèŠ‚ç‚¹ä¸Štraitä»¬çš„å…±äº«æ•°æ®çš„å¤§å°ï¼Œæ˜¯ä¸€ä¸ªç”¨æ³•ä¸Šå¤§å°å˜åŒ–çš„å¯¹è±¡       è¯¦è§ï¼š    FTraitReader::ReadGraphSharedData    å’Œä¸€äº›å…¶å®ƒç»†èŠ‚ï¼š FNodeDescription::Serialize FTrait::SerializeTraitSharedData FTraitWriter::WriteNode FTrait::SaveTraitSharedData    è¯»å–ä¹‹åå­˜æ”¾åœ¨UAnimNextAnimationGraph::SharedDataBufferï¼Œä½¿ç”¨ä¸Šå‚è€ƒFExecutionContext::GetNodeDescription      FNodeDescription::TemplateHandle ç”¨äºä»FNodeTemplateRegistryè·å–FNodeTemplateå¯¹è±¡å®ä¾‹   FNodeDescription::NodeInstanceDataSize åŒ…å«å®ä¾‹åŒ–æ•°æ®çš„å¤§å°ï¼ŒåŠ ä¸Šæ‰€æœ‰Latent Propertyçš„æ€»å¤§å°      æ³¨æ„FNodeDescription::NodeInstanceDataSizeä¸FNodeTemplate::NodeInstanceDataSizeçš„åŒºåˆ«    å¦å¤–ï¼ŒFNodeDescriptionè·ŸFNodeTemplateæ˜¯å¤šå¯¹ä¸€çš„ï¼Œä»å®ƒä»¬çš„å«ä¹‰ä¸Šå¯ä»¥ç†è§£   FNodeInstance  èŠ‚ç‚¹çš„å®ä¾‹åŒ–æ•°æ®ï¼Œè¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºï¼Œè‡ªèº«16å­—èŠ‚å¤§å°ï¼Œåˆ†é…å†…å­˜æ—¶ï¼ŒåŠ ä¸Šäº†traitä»¬çš„å®ä¾‹åŒ–æ•°æ®å¤§å°ä»¥åŠå®ƒä»¬çš„Latent Propertyå¤§å°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç”¨æ³•ä¸Šå¤§å°å˜åŒ–çš„å¯¹è±¡ï¼›å†…ç½®å¼•ç”¨è®¡æ•°       ç”¨æ³•ä¸Šå¯ä»¥å‚è€ƒï¼šFAnimationAnimNextRuntimeTest_TraitSerialization::RunTestï¼ŒFExecutionContext::AllocateNodeInstance   FNodeTemplateRegistry  FNodeTemplateå¯¹è±¡çš„å…¨å±€æ³¨å†Œè¡¨ï¼Œç¡®ä¿äº†æ‰€æœ‰FNodeTemplateå†…å­˜è¿ç»­  FTraitStackBinding  æè¿°ä¸€ç»„traitï¼ˆ1ä¸ªbase traitåŠå…¶children/additive traitä»¬ï¼‰æ‰€éœ€è¦çš„æ•°æ®ï¼Œç”¨äºæŸ¥è¯¢traitæˆ–è€…trait interface     è¯¦è§ï¼šFTraitStackBinding::FTraitStackBindingï¼Œç‰¹åˆ«æ˜¯æœ€åå‡ è¡Œ   ä¾‹å¦‚ï¼ŒFTraitStackBinding::GetInterfaceImplï¼šä»traitæ ˆä¸Šå°è¯•æ‰¾åˆ°å®ç°äº†æŒ‡å®šInterfaceUIDçš„traitï¼Œå¹¶è¿”å›è¯¥traitçš„binding  FTraitBinding  æè¿°ä¸€ç»„traitä¸­çš„ç‰¹å®štraitçš„æ•°æ®ï¼Œå¯ä»¥æŸ¥è¯¢å½“å‰traitæ˜¯å¦å®ç°äº†æŒ‡å®štrait interface  TTraitBinding  å¼ºç±»å‹/ç±»å‹å®‰å…¨çš„FTraitBinding  FExecutionContext  ç”±äºtraitæ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰§è¡Œæ—¶çš„åŠ¨æ€æ•°æ®/å®ä¾‹æ•°æ®éœ€è¦ä¸€ä¸ªå¯¹è±¡æ¥æ‰¿è½½ï¼Œå®ƒå°±æ˜¯FExecutionContextï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡  å®ƒç”¨äºç»‘å®šåˆ°ä¸€ä¸ªå›¾è¡¨å®ä¾‹ï¼Œå¹¶ä¸ºèŠ‚ç‚¹æä¾›ç»Ÿä¸€çš„traitæŸ¥è¯¢æ¥å£  å›¾è¡¨çš„Updateå’ŒEvaluateæµç¨‹å°è£…åœ¨ä¸€ä¸ªRigVMèŠ‚ç‚¹çš„æ‰§è¡Œå‡½æ•°ä¸­ï¼šFRigUnit_AnimNextRunAnimationGraph_v2_Execute()  FUpdateTraversalContext  æ›´æ–°å›¾è¡¨æ—¶ï¼Œç”¨åˆ°çš„ä¸Šä¸‹æ–‡å­ç±»å¯¹è±¡  å†…éƒ¨ä½¿ç”¨äº†åœ¨MemStackä¸Šåˆ†é…çš„æ ˆï¼ˆLIFOï¼‰å®ç°traitæ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œä¸å†æ˜¯ABPä¸­çš„é€’å½’æ–¹å¼     è¯¦è§ï¼šUE::AnimNext::UpdateGraphï¼Œæ¯ä¸ªtraitåœ¨whileå¾ªç¯ä¸­ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼Œåˆ†åˆ«å¯¹åº”IUpdate::PreUpdateå’ŒIUpdate::PostUpdate    IUpdate::OnBecomeRelevantä¹Ÿæ˜¯åœ¨è¿™é‡Œè°ƒç”¨   FEvaluateTraversalContext  è¯„ä¼°å›¾è¡¨æ—¶ï¼Œç”¨åˆ°çš„ä¸Šä¸‹æ–‡å­ç±»å¯¹è±¡  å†…éƒ¨çš„FEvaluationProgramç”¨äºå­˜æ”¾éå†å›¾è¡¨æ—¶ï¼Œå„ä¸ªèŠ‚ç‚¹éœ€è¦æ‰§è¡Œçš„FAnimNextEvaluationTask éšåè°ƒç”¨FEvaluationProgram::Executeåœ¨FEvaluationVMStackä¸Šæ‰§è¡Œå„è¯„ä¼°ä»»åŠ¡     è¯¦è§ï¼šUE::AnimNext::EvaluateGraphï¼Œæ‰§è¡Œæµç¨‹ä¸UpdateGraphç±»ä¼¼   FAnimNextEvaluationTask  FAnimNextEvaluationTaskæ˜¯å¯åœ¨traitä¹‹é—´å¤ç”¨çš„é€»è¾‘å¯¹è±¡ï¼Œä»£è¡¨è¿è¡Œäºè¯„ä¼°è™šæ‹Ÿæœºä¸Šçš„å¾®æŒ‡ä»¤ï¼Œé€šè¿‡è™šæ‹Ÿæœºçš„å†…éƒ¨çŠ¶æ€ï¼ˆä¹Ÿæ˜¯æ ˆï¼‰å¯ä»¥åŒæ—¶å¤„ç†è¾“å…¥å’Œè¾“å‡º  ç³»ç»Ÿæ¨¡å—  UAFç”±å¤šä¸ªæ¨¡å—ç»„æˆï¼š    åœ¨ue5-mainåˆ†æ”¯ä¸Šï¼Œç³»åˆ—æ¨¡å—çš„åå­—å‰ç¼€ä»AnimNextæ”¹æˆäº†UAF    å…¶ä¸­ UAF/AnimNext ï¼šæä¾›æ ¸å¿ƒçš„åŠ¨ç”»å·¥å…·å‡½æ•°ï¼Œå®šä¹‰åŸºç±»æ¥å£ç­‰ã€‚å¦‚ï¼šUE::AnimNext::FDecompressionTools::GetAnimationPose  UAFAnimGraph/AnimNextAnimGraphï¼šå®ç°åŸºäºRigVMçš„åŠ¨ç”»å›¾è¡¨ç›¸å…³åŠŸèƒ½  è¿™ä¸¤ä¸ªæ¨¡å—ä¹Ÿæ˜¯æœ¬æ–‡ä¸»è¦è®¨è®ºçš„èŒƒå›´  å…¶ä»–æ¨¡å—åˆ™æ˜¯ä¸ºUAFå¼•å…¥å…¶å®ƒæ¨¡å—/ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¼•å…¥StateTreeï¼ŒPoseSearchç­‰  SoA ï¼ˆstruct of arrayï¼‰  åœ¨TransformArrayOperations.hä¸­çš„æ¯ä¸ªå·¥å…·å‡½æ•°éƒ½æœ‰AoSå’ŒSoAä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”ä»£ç ä¸­ä¼˜å…ˆä½¿ç”¨äº†AoSï¼Œç”±æ­¤å¯è§åœ¨æ•°æ®ç»“æ„è®¾è®¡ä¸Šï¼ŒUAFä¼šæ›´é¢å‘æ•°æ®ä¸€äº›  ç»“è®º  UAFæ˜¯ä¸€ä¸ªé‡æ–°è®¾è®¡çš„ï¼Œé¢å‘æ•°æ®çš„ï¼Œå€¾å‘äºç»„åˆèŒƒå¼çš„ï¼Œé«˜æ€§èƒ½ï¼Œçµæ´»ï¼Œç®€æ´ï¼Œæ˜“æ‹“å±•çš„åŠ¨ç”»æ¡†æ¶  å®Œå…¨æŠ›å¼ƒäº†ABPçš„æ¡†æ¶ï¼Œæ‹¥æŠ±RigVM  å› å…¶ç‰¹æ€§é›†å°šæœªæˆç†Ÿï¼Œè€Œå¤„äºå®éªŒæ€§é˜¶æ®µ  æ‚é¡¹  ä»£ç é‡Œå†™åŠ¨ç”»è“å›¾  å‚è€ƒUAFTestSuite/AnimNextTestSuiteä»¥åŠUAFAnimGraphTestSuite/AnimNextAnimGraphTestSuiteæ¨¡å—ä¸­çš„æµ‹è¯•ç”¨ä¾‹ä»£ç   åœ¨UAFä¸­æ’­æ”¾â€œè’™å¤ªå¥‡â€  ç”±äºæœ¬æ–‡ç¯‡å¹…å·²ç»è¾ƒé•¿ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ä¸è¦å†è¯¦ç»†é˜è¿°äº†ï¼Œ  ç›¸å…³èŠ‚ç‚¹æ˜¯UInjectionCallbackProxyï¼ŒUPlayAnimCallbackProxy  ç›¸å…³ä»£ç åœ¨UE::AnimNext::FInjectionUtils::Inject  å®˜æ–¹FAQé“¾æ¥  Unreal Animation Framework (UAFï¼ŒAnimNext) FAQ"
  },
  
  {
    "title": "å¦‚ä½•æ­£ç¡®è·è’™å¤ªå¥‡çš„è’™å¤ªå¥‡å®ä¾‹",
    "url": "/posts/Get-Montage-Instance/",
    "categories": "Unreal Engine, Animation",
    "tags": "gameplay, animation, tutorial",
    "date": "2025-08-05 01:00:00 +0800",
    "content": "è’™å¤ªå¥‡ç®€ä»‹  è’™å¤ªå¥‡  æŒ‡çš„æ˜¯ UAnimMontage å¯¹è±¡  è’™å¤ªå¥‡å®ä¾‹  æŒ‡çš„æ˜¯ FAnimMontageInstance å¯¹è±¡  è·å–è’™å¤ªå¥‡å®ä¾‹  GetInstanceForMontage æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„è’™å¤ªå¥‡å®ä¾‹  ä» UAnimInstance::MontageInstances ä¸­æŸ¥æ‰¾  GetActiveInstanceForMontage æŸ¥æ‰¾æ¿€æ´»çš„è’™å¤ªå¥‡å®ä¾‹  ä» UAnimInstance::ActiveMontagesMap ä¸­æŸ¥æ‰¾  ç®€æ˜“æµç¨‹å›¾    å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ’­æ”¾ä¸€æ¬¡è’™å¤ªå¥‡æ—¶ï¼Œ  åœ¨æ’­æ”¾ä¹‹åï¼Œæ–°ç”Ÿæˆçš„è’™å¤ªå¥‡å®ä¾‹å°±å¯ä»¥é€šè¿‡ä¸Šè¿°ä»»æ„æ¥å£è·å–åˆ°,  åœ¨è§¦å‘åœæ­¢/å¼€å§‹æ··å‡ºä¹‹åï¼Œè’™å¤ªå¥‡å®ä¾‹ï¼Œä¸å†è¢«è®¤ä¸ºæ˜¯æ¿€æ´»çš„ï¼ˆActiveï¼‰ï¼Œ  åœ¨æ’­æ”¾å®Œæˆ/è’™å¤ªå¥‡å®é™…åœæ­¢ä¹‹åï¼Œæ— æ³•é€šè¿‡ä»»ä½•æ–¹å¼è·å–åˆ°ã€‚  ä½†åœ¨çŸ­æ—¶é—´ï¼Œå¤šæ¬¡æ’­æ”¾åŒä¸€ä¸ªè’™å¤ªå¥‡æ—¶ï¼Œäº‹æƒ…å¼€å§‹å˜å¾—å¤æ‚äº†ä¸€ç‚¹ï¼Œ  å‡è®¾ï¼Œæ’­æ”¾æ—¶ï¼ŒbStopAllMontagesä¸ºtrueï¼Œå³åœæ­¢ä¹‹å‰æ’­çš„è’™å¤ªå¥‡ã€‚  å¯¹äºGetInstanceForMontage    ç”±äºå¼•æ“çš„å®ç°æ˜¯ æŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªèµ„æºä¸ºä¼ å…¥è’™å¤ªå¥‡çš„å®ä¾‹æ—¶ï¼Œå°±è¿”å›ï¼Œ  é‚£ä¹ˆå¦‚æœMontageInstancesä¸­æœ‰æ­£åœ¨æ··å‡ºçš„åŒè’™å¤ªå¥‡å®ä¾‹ï¼Œé€šè¿‡æ­¤æ¥å£æ‹¿åˆ°çš„åªèƒ½æ˜¯åœ¨æ··å‡ºçš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ä½ å¯èƒ½éœ€è¦çš„â€œæ¿€æ´»çš„å®ä¾‹â€ï¼Œå› ä¸ºæ¿€æ´»çš„å®ä¾‹æ€»æ˜¯åŠ åœ¨æ•°ç»„æœ«å°¾ã€‚è¿™æ—¶å€™åº”è¯¥ä½¿ç”¨GetActiveInstanceForMontage  GetMontageInstanceForID é€šè¿‡InstanceIDæŸ¥æ‰¾  å¦å¤–å¼•æ“æä¾›äº†è¿™ä¸ªæ¥å£ï¼Œæ¥æ”¯æŒé€šè¿‡FAnimMontageInstance::InstanceIDè¿™ä¸ªè¿›ç¨‹é—´çš„å”¯ä¸€IDæ¥æŸ¥æ‰¾æŒ‡å®šå®ä¾‹  å»ºè®®  å› ä¸ºGetActiveInstanceForMontageè¿™ä¸€ä¸ªæ¥å£æ˜¯é€šè¿‡mapè€Œä¸æ˜¯éå†æ•°ç»„æŸ¥è¯¢ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œ  å¦‚æœåªæ˜¯éœ€è¦æŸ¥æ‰¾æ­£åœ¨æ’­æ”¾ä¸”æ²¡æœ‰æ··å‡º/æ¿€æ´» çš„è’™å¤ªå¥‡å®ä¾‹ï¼Œä½¿ç”¨è’™å¤ªå¥‡æŒ‡é’ˆå’ŒGetActiveInstanceForMontageæ¥å£æŸ¥è¯¢ã€‚  æ¿€æ´»çš„è’™å¤ªå¥‡å®ä¾‹æœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œå› ä¸ºè’™å¤ªå¥‡å’Œè’™å¤ªå¥‡å®ä¾‹æ˜¯é€šè¿‡mapä¸€ä¸€å¯¹åº”çš„ã€‚    å¯¹äºéæ¿€æ´»è’™å¤ªå¥‡çš„æŸ¥æ‰¾ï¼Œå¯ä»¥è€ƒè™‘ç¼“å­˜FAnimMontageInstance::InstanceIDï¼Œè¿›è¡Œç²¾ç¡®æŸ¥æ‰¾ï¼Œé¿å…å¤šæ¬¡æ’­æ”¾ç›¸åŒè’™å¤ªå¥‡æ—¶ï¼Œå¯èƒ½æ‰¾é”™å¯¹è±¡çš„é—®é¢˜"
  },
  
  {
    "title": "Latent Timer å»¶æ—¶å®šæ—¶å™¨",
    "url": "/posts/Latent-Timer/",
    "categories": "Unreal Engine, Plugins",
    "tags": "gameplay, remcommon, tutorial, documentation",
    "date": "2024-10-05 22:35:09 +0800",
    "content": "Latent timer  æ—¢ç„¶å·²ç»æœ‰äº† TimerManagerï¼Œä¸ºä»€ä¹ˆè¿˜è¦é€ è½®å­  å› ä¸ºï¼Œ åœ¨ç”¨TimerManageråšç©æ³•çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸å°‘é—®é¢˜:          SetTimerForNextTick å®é™…ä¸Šæ˜¯å½“å¸§è§¦å‘ï¼Œè€Œä¸æ˜¯ä¸‹å¸§           å›è°ƒé¡ºåºä¸å®šæ—¶å™¨çš„è®¾ç½®é¡ºåºä¸ä¿è¯ä¸€è‡´           è®¾ç½®å®šæ—¶å™¨æ—¶ï¼Œä¸èƒ½æŒ‡å®š tick group           TimerManager::Tick æ˜¯ç¡¬ç¼–ç åœ¨å½“å¸§ç¨æ™šçš„æ—¶åˆ»           åªæ”¯æŒä»¥ç§’/æ—¶é—´å•ä½è®¾ç½®å»¶è¿Ÿï¼Œä½ æƒ³ä¸æƒ³ç”¨å¸§æ•°æ¥è®¾ç½®å»¶è¿Ÿ?           ä¸æ”¯æŒå¾ªç¯æ¬¡æ•°           å°½ç®¡å·²ç»å¯¹ FTimerUnifiedDelegate åšäº†å†…å­˜å¤§å°çš„ä¼˜åŒ–ï¼Œä½†FTimerDta è¿˜æ˜¯å¾ˆè‡ƒè‚¿      é‚£æˆ‘ä»¬èƒ½è§£å†³æ‰€æœ‰æåˆ°çš„é—®é¢˜ä¹ˆ?  å—ï¼Œå…¨è§£å†³æœ‰ç‚¹éš¾ï¼Œä½†è§£å†³90%çš„é—®é¢˜å°±æ˜¯å°èœä¸€ç¢Ÿï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸ªå¤§æ•‘æ˜Ÿ â€” FLatentActionManager  FLatentActionManager æ˜¯ä¸€ä¸ªç®€å•åˆå¼ºå¤§çš„å·¥å…·ï¼Œç”¨æ¥æ¯å¸§æ›´æ–°ä»»æ„çš„ FPendingLatentAction å®ä¾‹  æ¯ä¸ª LatentAction ä¼šç»‘å®šåˆ°ä¸€ä¸ª UObjectï¼Œ å®ƒä¼šåœ¨ç»‘å®šå¯¹è±¡çš„ tick group æ›´æ–° ! ä½†å¦‚æœç»‘å®šå¯¹è±¡çš„æ›´æ–°è¢«ç¦ç”¨äº†ï¼Œå®ƒå°±ä¼šåœ¨â€œæ¥è¿‘å¸§æœ«â€çš„æ—¶åˆ»æ›´æ–°ï¼Œå°±åœ¨æ¥è¿‘ä¸”æ°å¥½æ—©äºTimerManager::Tickçš„æ—¶åˆ»  FPendingLatentAction å¯ä»¥è¢«ç»§æ‰¿ï¼Œåšä»»æ„ä½ æƒ³è¦çš„äº‹æƒ…ã€‚ ä¾‹å¦‚: FDelayUntilNextTickActionï¼Œ FDelayAction å®ƒä»¬å°±æ˜¯è“å›¾ä¸­å»¶è¿ŸèŠ‚ç‚¹çš„å¹•åè‹±é›„  æˆ‘è§£å†³ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•ï¼šRem::Latent::FTimerLatentAction_Delay          æä¾› Rem::Latent::SetTimerForThisTick å’Œ Rem::Latent::SetTimerForNextTick ä»¥åœ¨è¡¨è¾¾å»¶è¿Ÿä¸€å¸§çš„è¯­ä¹‰æ—¶ï¼Œæä¾›æœ€å¤§é™åº¦çš„æ˜ç¡®å’Œçµæ´»æ€§           Latent Action æ˜¯æŒ‰ç…§å®ƒä»¬ç»‘å®šåˆ°UObjectçš„é¡ºåºè¿›è¡Œå¤„ç†çš„           Latent Actionçš„Tick group å¯ä»¥é€šè¿‡ç»‘å®šä¸€ä¸ªåœ¨ç›®æ ‡åˆ†ç»„çš„å¯¹è±¡ä¸Šæ¥æ§åˆ¶ã€‚ å¹¶ä¸”é¡ºç†æˆç« çš„æ”¯æŒæŒ‡å®šæ›´æ–°ä¾èµ–           æ”¯æŒæŒ‰å¸§æ•°å»¶è¿Ÿ! è¿™ä¸ªåŠŸèƒ½å¯èƒ½ä¸ä¼šå‡ºç°åœ¨ TimerManagerã€‚ ä¸¤ä¸ªè¾…åŠ©ç»“æ„ä½“: FTimerParameterHelper_Timeï¼Œ FTimerParameterHelper_Frameï¼Œ ä¸€ä¸ªç»Ÿä¸€çš„API: Rem::Latent::SetTimer           æ”¯æŒæŒ‡å®šå¾ªç¯æ¬¡æ•° : FTimerParameterHelper_Time::LoopCountï¼Œ FTimerParameterHelper_Frame::LoopCount           æ”¯æŒä»ä¸‹å¸§å¼€å§‹è®¡æ•°: è¯¦è§ï¼šFTimerParameterHelper_Time::bSkipCountingThisFrame           æˆ‘çš„ FTimerLatentAction_Delay åªéœ€è¦40å­—èŠ‚å°±å¯ä»¥æŠŠæ‰€æœ‰ä»»åŠ¡åšå®Œäº†ï¼Œ ä½† FTimerDta æœ‰128å­—èŠ‚ï¼Œ å¤§3.2å€!           ä¸€ç§ ä¸€åŠ³æ°¸é€¸ çš„æš‚åœå®šæ—¶å™¨çš„æ›¿ä»£æ–¹æ³•ï¼šæš‚åœä¸€å¸§: Rem::Latent::SetTimerPausedOneFrame           è¿˜æ˜¯ç†Ÿæ‚‰çš„APIs: Rem::Latent::PauseTimerï¼Œ Rem::Latent::UnpauseTimerï¼Œ Rem::Latent::SetTimerPaused(æˆ‘ä»¬ä¹‹å‰è§è¿‡å—?)ï¼Œ Rem::Latent::StopTimerï¼Œ Rem::Latent::FindTimerAction           åŸç”Ÿæ”¯æŒå¯é‡æ–°è§¦å‘çš„å®šæ—¶å™¨: Rem::Latent::ResetTimerDelayï¼Œ åŒæ—¶æ”¯æŒæŒ‰æ—¶é—´å’Œå¸§æ•°æ¥å»¶è¿Ÿ           è°ƒç”¨æ¬¡æ•°è¡¥å¿å¯ä»¥é€šè¿‡ FTimerParameterHelper_Time::bMaxOncePerFrame é€‰æ‹©æ€§å¯ç”¨ï¼Œ (è·ŸTimerManagerä¸€æ ·)           ç›®å‰è¿˜æœ‰27ä¸ªæ¯”ç‰¹æ˜¯æµªè´¹çš„ï¼Œ å®ƒä»¬æ˜¯æœªæ¥çš„å¸Œæœ›!      é™åˆ¶          Rem::Latent::FTimerHandle æ˜¯32ä½çš„ï¼Œ å› ä¸º FLatentActionManager::AddNewAction åªæ¥å— int32ï¼Œ ä½†å®ƒä¹‹å‰åœ¨ TimerManageræ˜¯ uint64           å¦‚æœä½ åœ¨ FLatentActionManager::ProcessLatentActions æœŸé—´å¯¹åŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨äº† Rem::Latent::SetTimerForThisTick å¯èƒ½ä¼šå‘ç”Ÿæ­»å¾ªç¯ï¼Œ è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨ Rem::Latent::SetTimerForNextTick           å¦‚æœç»‘å®šå¯¹è±¡å½“å¸§å·²ç»æ›´æ–°è¿‡ï¼Œ Rem::Latent::SetTimerForThisTick å°±ä¸ä¼šåœ¨å¯¹åº”çš„ tick group æ›´æ–°ï¼Œ è¿™ç§æƒ…å†µä¸‹ï¼Œè€ƒè™‘ä½¿ç”¨Rem::Latent::SetTimerForNextTick           ä¸ºäº†ç®€å•èµ·è§ï¼ŒTimeToDelayï¼Œ LoopCountï¼Œ InitialDelay éƒ½åªæœ‰4å­—èŠ‚çš„å¤§å°ï¼Œ å°†æ¥å¯èƒ½ä¼šè€ƒè™‘ç”¨ä¸Šé‚£äº›ç©ºé—²çš„æ¯”ç‰¹ä½           éœ€è¦ç»‘å®šçš„å¯¹è±¡å¯ç”¨æ¯å¸§æ›´æ–°ï¼Œä»¥æ”¯æŒç»™æˆ‘ä»¬çš„å®šæ—¶å™¨æŒ‡å®štick group      å®ä¾‹ä»£ç   void UYourObject::DoJob() {     auto TimerHandle = Rem::Latent::SetTimerForThisTick(*this,         FTimerDelegate::CreateUObject(this, &amp;ThisClass::Callback)); }   void UYourObject::TryDoJobUntilSucceed() {     bool bWantToRetry{true};      ON_SCOPE_EXIT     {         if (bWantToRetry)         {             Rem::Latent::SetTimerForNextTick(*this, FTimerDelegate::CreateWeakLambda(this,             [this]             {                 TryDoJobUntilSucceed();             }));         }     };      // ... }   void UYourObject::RetriggerableJob() {     // ...      if (!TimerHandle.IsValid())     {         TimerHandle = Rem::Latent::SetTimer(*this, FTimerDelegate::CreateWeakLambda(this, [this]         {             // ...             Rem::Latent::StopTimer(*this, TimerHandle);             TimerHandle = {};         }), {.TimeToDelay = 1.0f, .LoopCount = 0/*loop infinite*/});     }     else     {         Rem::Latent::ResetTimerDelay(*this, TimerHandle);     } }"
  },
  
  {
    "title": "Re:ä»é›¶å¼€å§‹çš„RemGameplayCamera",
    "url": "/posts/RemGameplayCamera-from-zero/",
    "categories": "Unreal Engine, Plugins",
    "tags": "gameplay, remgameplaycamera, tutorial, documentation",
    "date": "2024-10-05 20:55:20 +0800",
    "content": "å‰è¨€  æœ¬æ–‡æ˜¯ RemGameplayCamera æ’ä»¶çš„ç®€å•æ˜äº†çš„å…¥é—¨æ•™ç¨‹  å®ƒå°†æ¶µç›–ä½¿ç”¨è¯¥æ’ä»¶æ‰€éœ€çš„åŸºç¡€çŸ¥è¯†ã€‚  å¸Œæœ›ä½ ä¼šå–œæ¬¢  (æˆ‘ä¼šæŒç»­æ”¹è¿›æœ¬æ–‡ï¼Œæ¬¢è¿ä»»ä½•åé¦ˆæˆ–è€…è´¡çŒ®)  ä»‹ç»  RemGameplayCamera æ’ä»¶æ˜¯ä¸ºè™šå¹»å¼•æ“æ‰“é€ çš„ä¸€ä¸ªæ•°æ®é©±åŠ¨çš„ç©æ³•ç›¸æœºç³»ç»Ÿã€‚å®ƒæä¾›äº†åŸºäºçŠ¶æ€ï¼ˆTagï¼‰çš„ï¼Œæ¨¡å—åŒ–çš„ï¼Œå…·æœ‰ä¼˜å…ˆçº§çš„ç›¸æœºæ•°æ®é…ç½®ï¼Œä½¿ç”¨æ•°æ®èµ„äº§ï¼Œæ”¯æŒå®æ—¶ç¼–è¾‘  åŸºäºå¼•æ“å·²æœ‰çš„ç›¸æœºæ¡†æ¶ä¹‹ä¸Šæ­å»ºï¼Œè®©å®ƒå®Œå…¨å…¼å®¹åŸç”Ÿçš„ç›¸æœºåºåˆ—ï¼Œç›¸æœºæŠ–åŠ¨ï¼Œè§‚çœ‹å¯¹è±¡åˆ‡æ¢ä»¥åŠå…¶ä»–ç›¸æœºæ•ˆæœ  ä»–æ˜¯åŸºäºAActorçš„ï¼Œæ‰€ä»¥ä»»æ„çš„AActorå­ç±»å¯¹è±¡éƒ½å¯ä»¥æ¥å…¥ï¼Œï¼ˆå½“å‰ UAbilitySystemComponent æ˜¯å¿…éœ€çš„ï¼‰  å› ä¸ºæœ‰å†…ç½®çš„ç›¸æœºä½ç½®ï¼Œæ—‹è½¬å¹³æ»‘åŠå…¶ä»–è®¸å¤šæœºåˆ¶ï¼Œåªéœ€è¦è°ƒæ•´ç›¸æœºé…ç½®ï¼Œå°±å¯ä»¥è½»æ˜“çš„å®ç°åƒ ALS æˆ–è€… Lyra ä¸­é‚£æ ·çš„ç›¸æœºæ•ˆæœï¼Œä¸éœ€è¦å†™ä¸€è¡Œä»£ç   å®ƒå†…ç½®äº†å¾ˆå¤šç›¸å…³çš„åŸºç¡€åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªç”±è§†è§’ï¼Œ æ•Œäººé”å®šï¼Œ æ¨¡å‹æ¸éš å’Œ åå¤„ç†ç®¡ç†ç­‰ï¼Œå¹¶ä¸”æ”¯æŒè‡ªå®šä¹‰æ‹“å±•  ç›¸æœºæ•°æ®å¤„ç†ç®¡çº¿è¢«åˆ†æˆäº†å¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥é€šè¿‡è“å›¾æˆ–è€…ä»£ç è‡ªç”±æ‹“å±•ï¼  ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°åƒ åŸºäºé€Ÿåº¦çš„FOVï¼Œ åŸºäºé€Ÿåº¦çš„ç›¸æœºåç§»é‡ç­‰åŠŸèƒ½  æ³¨æ„ï¼šå½“å‰æ­¤æ’ä»¶ä¾èµ–è§‚çœ‹å¯¹è±¡ä¸Šçš„æŠ€èƒ½ç»„ä»¶æ¥æä¾›åŸºäºçŠ¶æ€äº‹ä»¶é©±åŠ¨çš„ç›¸æœºæ•°æ®æ›´æ–°æœºåˆ¶ã€‚åŒæ—¶ä¹Ÿé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œè®©ç›¸æœºä¸æ¸¸æˆä¸–ç•Œä¸­çš„å…¶å®ƒéƒ¨åˆ†è§£è€¦å¼€æ¥  0. ä» ç¬¬ä¸‰äººç§°æ¨¡æ¿ å¼€å§‹  å…¶å®ä¸æ˜¯ä»é›¶å¼€å§‹ğŸ˜€ï¼Œ æˆ‘å°†å¼•å¯¼ä½ åšä¸€ä¸ªå…³äº RemGameplayCamera çš„ç®€å•æ¼”ç»ƒï¼šæ›¿æ¢ç¬¬ä¸‰äººç§°æ¨¡æ¿ä¸­çš„é»˜è®¤ç›¸æœº  1. æ‹·è´ Config ç›®å½•ä¸­çš„æ–‡ä»¶åˆ°ä½ çš„é¡¹ç›®  å‡å®šä½ å·²ç»åˆ›å»ºäº† Third Person project å¹¶ä¸”æŠŠ RemGameplayCamera æ”¾è¿›äº†æ’ä»¶ç›®å½•é‡Œ  è¯·æ‹·è´ RemGameplayCamera/Config æ–‡ä»¶å¤¹åˆ° YourProject/Config æ–‡ä»¶å¤¹ï¼Œ å®ƒä»¬æ˜¯ç›¸æœºç³»ç»Ÿçš„é»˜è®¤ GameplayTag é…ç½®ã€‚ä»–ä»¬ä¼šæŠŠé»˜è®¤çš„æ ‡ç­¾æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”è‡ªåŠ¨é…ç½®å¥½ URemCameraSettings å¯¹è±¡  ä½ å¯ä»¥åœ¨ç¼–è¾‘å™¨å¯åŠ¨ä¹‹åï¼Œå»Project Settings -&gt; Game -&gt; Rem Camera Settings æ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚æˆ–è€…è‡ªå®šä¹‰å®ƒä»¬ï¼Œå¦‚æœä½ æƒ³è¦çš„è¯  2. å¯¹ç¬¬ä¸‰äººç§°è§’è‰²é€‰æ‹©æ€§å¯ç”¨  é»˜è®¤æƒ…å†µä¸‹ï¼Œrem camera system å¯¹æ¯ä¸ªè§‚çœ‹å¯¹è±¡éƒ½æ˜¯ç¦ç”¨çš„  æƒ³è¦ä½¿ç”¨æ­¤ç³»ç»Ÿçš„è§‚çœ‹å¯¹è±¡ï¼Œéœ€è¦åœ¨å®ƒä»¬çš„AActor::Tagså±æ€§ä¸­ï¼Œå†™å…¥RemTickCameraè¿™ä¸ªåå­—ï¼Œä»¥ä¾¿è¢«æ­£å¸¸è¯†åˆ«  å› æ­¤ï¼Œç°åœ¨æ‰“å¼€ BP_ThirdPersonCharacterï¼Œ ç„¶åä»ç»†èŠ‚é¢æ¿ä¸­æ·»åŠ å®ƒ:   3. åˆ›å»ºå¿…éœ€çš„æ–‡ä»¶  ä¸ºäº†ä½¿ç”¨ rem camera systemï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ARemPlayerCameraManagerï¼Œå¹¶ä¸ºå®ƒå‡†å¤‡å¥½ ç›¸æœºæ•°æ®  åˆ›å»º BP_RemCameraManager  æ‰€ä»¥ï¼Œé¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºç›¸æœºç®¡ç†å™¨è“å›¾ï¼Œæ˜¯å®ƒè°ƒåº¦ç€æ•´ä¸ªç³»ç»Ÿï¼Œå–åä¸ºâ€BP_RemCameraManagerâ€ï¼Œç»§æ‰¿è‡ªARemPlayerCameraManager  åˆ›å»º BP_PlayerController  ä¸ºäº†ä½¿ç”¨ BP_RemCameraManagerï¼Œ åˆ›å»ºä¸€ä¸ªç©å®¶æ§åˆ¶å™¨è“å›¾ï¼Œå–åä¸ºâ€BP_PlayerControllerâ€ï¼Œ ç»§æ‰¿è‡ªAPlayerControllerï¼Œå¹¶ä¸”æŒ‡å®šâ€BP_RemCameraManagerâ€ åˆ°å®ƒçš„ Player Camera Manager Class å±æ€§:   åˆ›å»º BP_GameMode  ä¸ºäº†ä½¿ç”¨ BP_PlayerControllerï¼Œ åˆ›å»ºä¸€ä¸ªæ¸¸æˆæ¨¡å¼è“å›¾ï¼Œå–åä¸ºâ€BP_GameModeâ€ï¼Œ ç»§æ‰¿è‡ªAYourProjectNameGameModeï¼Œå¹¶ä¸”æŒ‡å®šâ€BP_PlayerControllerâ€ åˆ°å®ƒçš„ Player Controller Class å±æ€§:   åˆ›å»ºç›¸æœºæ•°æ®æ–‡ä»¶  BP_RemCameraManager éœ€è¦ ç›¸æœºæ•°æ® ä»¥ä¾¿æ­£å¸¸å·¥ä½œ  ç›¸æœºæ•°æ®é€šè¿‡ä¸€ä¸ªç®€å•çš„å±‚çº§ç»„ç»‡èµ·æ¥ï¼š    URemCameraSettingForViewTargets æ‹¥æœ‰æ¸¸æˆä¸­æ‰€æœ‰å¯è§‚çœ‹å¯¹è±¡çš„ç›¸æœºé…ç½®ã€‚ è¢« ARemPlayerCameraManagerå¼•ç”¨ç€ã€‚ è¿™æ˜¯å±‚çº§ä¸­çš„é¡¶å±‚æˆ–è€…è¯´æ ¹èŠ‚ç‚¹   URemCameraSettingAssetsForViewTarget æ‹¥æœ‰ä¸€ç§ç±»å‹çš„è§‚çœ‹å¯¹è±¡çš„ç›¸æœºé…ç½®ã€‚ è¢« URemCameraSettingForViewTargetså¼•ç”¨ç€   URemCameraSettingAsset æ˜¯å…·ä½“çš„ç›¸æœºé…ç½®æ•°æ®æ‰€åœ¨çš„åœ°æ–¹ã€‚ è¢«URemCameraSettingAssetsForViewTargetå¼•ç”¨ç€   åˆ›å»º DA_Camera_Setting  é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®èµ„äº§ï¼Œ å–åä¸º DA_Camera_Settingï¼Œ æ‹¥æœ‰URemCameraSettingAssetç±»å‹  å¤åˆ¶ä¸‹é¢çš„æ•°æ®ï¼Œç²˜è´´åˆ°State Query property:  (TokenStreamVersion=0,TagDictionary=,QueryTokenStream=(0,1,6,1,1,0),UserDescription=\"\",AutoDescription=\" NONE(  ANY( ) )\")  å®ƒä¼šè®© tag queryï¼ˆçŠ¶æ€æŸ¥è¯¢/æ ‡ç­¾æŸ¥è¯¢ï¼‰ æ€»æ˜¯åŒ¹é…çš„ï¼Œ ä»¥ä¾¿è®©æˆ‘ä»¬çš„ç›¸æœºé…ç½®èµ„äº§æ€»æ˜¯ç”Ÿæ•ˆ     é€šå¸¸ï¼Œè¿™é‡Œåº”è¯¥åŒ¹é…ç‰¹å®šè§‚çœ‹å¯¹è±¡çš„çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€æ˜¯ç”¨æ ‡ç­¾è¡¨ç¤ºçš„   ç„¶åï¼Œå¤åˆ¶ä¸‹é¢çš„æ•°æ®ï¼Œç²˜è´´åˆ°Setting Values å±æ€§:  ((Comment=\"CameraSettingValue.CameraTransform.Location.Offset\",SettingTag=(TagName=\"CameraSettingValue.CameraTransform.Location.Offset\"),Value=/Script/RemGameplayCamera.RemCameraDataLocationOffset_Fixed(Offset=(X=280.000000,Y=0.000000,Z=0.000000))),(Comment=\"CameraSettingValue.Fov.Value\",SettingTag=(TagName=\"CameraSettingValue.Fov.Value\"),Value=/Script/RemGameplayCamera.RemCameraDataFov_Fixed(Fov=90.000000)),(Comment=\"CameraSettingValue.PivotTransform.Value\",SettingTag=(TagName=\"CameraSettingValue.PivotTransform.Value\"),Value=/Script/RemGameplayCamera.RemCameraDataTransform_MeshTransform(SocketName=\"spine_05\",Offset=(X=0.000000,Y=0.000000,Z=0.000000))),(Comment=\"CameraSettingValue.Trace\",SettingTag=(TagName=\"CameraSettingValue.Trace\"),Value=/Script/RemGameplayCamera.RemCameraDataTrace_Collision(TraceRadius=15.000000,TraceDistanceRatioInterpolationSpeed=10.000000,TraceStartLocationAlpha=(Curve=(),BlendTime=1.000000),TraceStartTransform=None)),(Comment=\"CameraSettingValue.CameraTransform.Location.Blend\",SettingTag=(TagName=\"CameraSettingValue.CameraTransform.Location.Blend\"),Value=/Script/RemGameplayCamera.RemCameraDataBlendAlpha_Blend(Blend=/Script/RemGameplayCamera.RemCameraAlphaBlend(Blend=(Curve=(),BlendTime=1.000000)))))   è¿™äº›æ•°æ®å°è¯•æ¨¡æ‹ŸBP_ThirdPersonCharacterçš„ç›¸æœºè‡‚çš„é…ç½®  åˆ›å»º DA_Camera_ViewTarget  æ—¢ç„¶å…·ä½“çš„é…ç½®æ•°æ®å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å°†è¦åˆ›å»ºå¦ä¸€ç§æ•°æ®èµ„äº§ï¼Œå–åä¸º DA_Camera_ViewTargetï¼Œ æ‹¥æœ‰URemCameraSettingAssetsForViewTargetç±»å‹ã€‚ å®ƒæŒ‡å®šäº†è¦ç»™æˆ‘ä»¬çš„è§’è‰²ä½¿ç”¨çš„é…ç½®æ•°æ®èµ„äº§  å¯¹äº View Target Tag Query å±æ€§ï¼Œ æˆ‘ä»¬å°†ä¼šä½¿ç”¨è·Ÿä¸Šé¢ğŸ‘†   DA_Camera_Setting::State Queryä¸€æ ·çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å®ƒå¯ä»¥åŒ¹é…æˆåŠŸå¹¶è¢«ä½¿ç”¨     é€šå¸¸ï¼Œè¿™é‡Œåº”è¯¥åŒ¹é…ç‰¹å®šè§‚çœ‹å¯¹è±¡çš„è¯†åˆ«ç ï¼Œå®ƒä¹Ÿæ˜¯ç”¨æ ‡ç­¾è¡¨ç¤ºçš„   ç„¶ååœ¨SettingAssetsForStatesDataä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶æŠŠ DA_Camera_Setting æ·»åŠ åˆ°å®ƒçš„ SettingAssets å±æ€§ ï¼ˆbUseSettingAssetsGroupsæ˜¯æ–°å¢çš„è¾ƒé«˜çº§åŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå¿½ç•¥ï¼Œè®©å®ƒä¿æŒæœªå‹¾é€‰çŠ¶æ€ï¼Œä»¥ä½¿ç”¨ä¸ä¹‹ç›¸å¯¹çš„ç®€å•åŠŸèƒ½ï¼Œåæ–‡ä¼šæœ‰å¯¹å…¶çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼‰  åˆ›å»º DA_Camera_ViewTargets  æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºæœ€åä¸€ä¸ªæ•°æ®èµ„äº§ï¼Œå–åä¸º DA_Camera_ViewTargetsï¼Œ æ‹¥æœ‰ URemCameraSettingForViewTargetsç±»å‹ã€‚ å®ƒæœ‰ç€æ¸¸æˆä¸­æ‰€æœ‰è§‚çœ‹å¯¹è±¡çš„ç›¸æœºé…ç½®çš„å¼•ç”¨  æ·»åŠ  DA_Camera_ViewTarget åˆ°å®ƒçš„ Settings for View Targets å±æ€§ï¼Œ å®Œæˆ  æœ€åä½†åŒæ ·é‡è¦çš„ï¼Œ æŒ‡å®š DA_Camera_ViewTargets åˆ° BP_RemCameraManager::CameraSettingForViewTargetså±æ€§    4. PIEï¼Œå¯åŠ¨ï¼  åœ¨æŠŠæ¸¸æˆæ¨¡å¼æ¢æˆ BP_GameMode åï¼Œ ç‚¹å‡»å¼€å§‹æŒ‰é’®  ä½ å¯èƒ½ä¼šå‘ç°ç›¸æœºæ­£è·Ÿç€è§’è‰²çš„è„ŠæŸ±è¿åŠ¨ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„æ˜¯è§‚å¯Ÿå®ƒè½åœ°çš„æ—¶å€™ã€‚å¦å¤–ï¼Œç›¸æœºåœ¨è¿œç¦»å‘ç”Ÿç¢°æ’çš„ç‰©ä½“æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªå¹³æ»‘è¿‡æ¸¡çš„è¿‡ç¨‹ï¼Œè·ŸALSä¸­çš„è¡¨ç°ç±»ä¼¼  åœ¨æ§åˆ¶å°è¾“å…¥å‘½ä»¤ï¼šRem.Camera.DrawDebug.Shape 1ï¼Œ ä¸€ä¸ªè“è‰²çš„çƒä½“ä¼šæ˜¾ç¤ºåœ¨è§’è‰²çš„è„ŠæŸ±é™„è¿‘ï¼Œå®ƒä»£è¡¨ç€Pivot Locationï¼ˆæ¢çº½ç‚¹ï¼Œæ”¯ç‚¹ï¼‰ï¼Œè¿™ç‚¹ä¹Ÿè·ŸALSä¸€æ ·    5. ç¥è´ºæ‚¨å®Œæˆæ•™ç¨‹  æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»æœ¬æ–‡  â™¥  ç»§ç»­æ·±å…¥ï¼Ÿ  ç›¸æœºä½ç½®æ˜¯å¦‚ä½•è®¡ç®—çš„    ğŸ‘† è¿™å¼ å›¾ç‰‡åŒ…å«äº†ä¸€äº›ä¾¿äºç†è§£è¿™ä¸ªç³»ç»Ÿçš„å…³é”®ç”¨è¯­ï¼Œå½“ä½ æ„Ÿåˆ°å›°æƒ‘çš„æ—¶å€™ï¼Œå¯ä»¥éšæ—¶å‚è€ƒå®ƒï¼Œæˆ–è€…åœ¨æˆ‘ä»¬çš„ç¾¤é‡Œæé—®æ±‚åŠ©ã€‚  ç›¸æœºç®¡çº¿ä¸­éœ€è¦çš„æ¯ä»½æ•°æ®éƒ½å¯ä»¥è¢«è‡ªç”±æ‹“å±•  æ¯ä»½æ•°æ®éƒ½ä¸ºä½ å†…ç½®äº†ä¸å°‘ç›¸å…³çš„åŠŸèƒ½ï¼Œè¯·è‡ªç”±æ¢ç´¢å®ƒä»¬     æƒ³çŸ¥é“æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ URemCameraSettings å’Œ FRemCameraSettingTagValue çš„æµ®åŠ¨æç¤º   SettingAssetsForStatesData åŒä¸€è§‚çœ‹å¯¹è±¡çš„ç»†åˆ†çŠ¶æ€é…ç½®  åœ¨3.2ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸€ç§è§‚çœ‹å¯¹è±¡çš„é…ç½®èµ„äº§ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ç»„ç›¸æœºé…ç½®  å½“è§‚çœ‹å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹éƒ½æœ‰ä¸åŒçš„ç›¸æœºé…ç½®æ—¶ï¼Œéœ€è¦æŠŠæ‰€æœ‰ç›¸æœºé…ç½®éƒ½åˆ—å…¥å…¶ä¸­ï¼Œéš¾ä»¥ç»´æŠ¤å’Œä½¿ç”¨  ç°åœ¨å¯ä»¥åˆ†åˆ«ä¸ºæ¯ç§ç»„åˆçŠ¶æ€é…ç½®ä¸€ç»„ç›¸æœºé…ç½®ã€‚ç»„åˆæ€å˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢é…ç½®ï¼Œä»è€Œè§£å†³äº†ä¸Šé¢ä¸¤ä¸ªé—®é¢˜  æ¯”å¦‚ï¼šä¸ºä¸åŒçš„ç§»åŠ¨æ¨¡å¼åˆ†åˆ«é…ç½®ä¸€ç»„é…ç½®ï¼Œè€Œä¸æ˜¯æŠŠæ‰€æœ‰ç§»åŠ¨æ¨¡å¼çš„ç›¸æœºé…ç½®éƒ½é…åœ¨ä¸€ä¸ªæ•°ç»„é‡Œã€‚     å½“ç„¶æ²¡äººé˜»æ­¢ä½ è¿™ä¹ˆåšï¼Œä½†æ˜¾ç„¶å‰è€…ä»é•¿è¿œæ¥çœ‹ä¼šæ›´å¥½   å‹¾é€‰ bUseSettingAssetsGroups ä»¥ä½¿ç”¨é…ç½®åˆ†ç»„åŠŸèƒ½  åœ¨3.2ç‰ˆæœ¬ï¼Œæˆ‘åœ¨SettingAssetsForStatesDataä¸­æ·»åŠ äº†SettingAssetsGroupså±æ€§ï¼Œä»¥æ”¯æŒç›¸æœºé…ç½®åœ¨è§‚çœ‹å¯¹è±¡çš„ä¸åŒçŠ¶æ€ä¸‹å¤ç”¨  ä½¿ç”¨URemCameraSettingAssetGroupç±»å‹ï¼Œå°†ç›¸æœºé…ç½®è‡ªç”±ç»„åˆï¼Œå¾—åˆ°æƒ³è¦çš„ä¸€ç»„ç›¸æœºé…ç½®  æ¯ä¸ªé…ç½®åˆ†ç»„å¯ä»¥é€‰æ‹©å°†ä¸€ä¸ªé…ç½®å­åˆ†ç»„åŠ åœ¨å½“å‰è¿™ç»„ç›¸æœºé…ç½®çš„æœ€å‰é¢æˆ–è€…æœ€åé¢ï¼Œæˆ–è€…æŒ‡å®šç›¸æœºé…ç½®çš„å‰é¢æˆ–è€…åé¢    ä¿®æ”¹å¼•æ“ï¼Œä»¥æ”¯æŒé…ç½®ç±»å‹çš„è¿‡æ»¤  éœ€è¦è”ç³»æˆ‘è·å–æºç ä»“åº“çš„è®¿é—®æƒé™ï¼Œå› ä¸ºå¿…éœ€ä¿®æ”¹å¼•æ“å’Œæ’ä»¶çš„ä»£ç   æ“ä½œæ­¥éª¤ï¼š     å°†ä»“åº“çš„æ ¹ç›®å½•ä¸­çš„patchåº”ç”¨åˆ°å¼•æ“   ç¼–è¾‘æ’ä»¶ä»£ç ä¸­çš„REM_ENABLE_CAMERA_DATA_DROP_DOWN_FILTERå®ä¸ºtrue   å³å¯è·å¾—è‡ªåŠ¨æ ¹æ®é€‰ä¸­çš„ç›¸æœºé…ç½®Tagè¿‡æ»¤æŒ‡å®šç›¸æœºæ•°æ®ç±»å‹çš„æ•°æ®ï¼š    å¯ä»¥çœ‹åˆ°ä¸Šå›¾ä¸­ï¼Œåªåˆ—å‡ºäº†å˜æ¢ç›¸å…³çš„æ•°æ®"
  },
  
  {
    "title": "ç®€æFGameplayTagQuery",
    "url": "/posts/Inside-FGameplayTagQuery/",
    "categories": "Unreal Engine",
    "tags": "gameplay",
    "date": "2023-11-13 01:13:14 +0800",
    "content": "ä»€ä¹ˆæ˜¯FGameplayTagQuery  å¼•ç”¨è‡ªæºç æ³¨é‡Š:     FGameplayTagQueryæ˜¯å¯ä»¥æŸ¥è¯¢FGameplayTagContainerä¸­çš„ä¸€ç»„Tagæ˜¯å¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ä¸€ç»„é€»è¾‘è¡¨è¾¾å¼. ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„queryåˆ™è¡¨ç¤ºå¯¹åº”çš„tag containeræ˜¯æ»¡è¶³æ¡ä»¶çš„. å…¶ä¸­é€»è¾‘è¡¨è¾¾å¼æ”¯æŒâ€ä¸,æˆ–,éâ€,ä»¥åŠåµŒå¥—çš„å­è¡¨è¾¾å¼. åœ¨å†…éƒ¨,å®ƒå°†è¿™äº›é€»è¾‘è¡¨è¾¾å¼ä»¥å­—èŠ‚æµçš„å½¢å¼è¡¨è¾¾,å®ç°å†…å­˜ä¸Šçš„é«˜æ•ˆç‡,å¹¶ä¸”è¿è¡Œæ—¶å¯ä»¥å¿«é€Ÿæ£€éªŒ   ä¸ºä»€ä¹ˆè¦ä½¿ç”¨FGameplayTagQuery  å› ä¸ºä½¿ç”¨FGameplayTagQueryè¿›è¡Œé€»è¾‘åŒ¹é…æ—¶,tagæ•°é‡å’ŒåŒ¹é…é€»è¾‘éƒ½å¯ä»¥æ˜¯ä»»æ„çš„,ä¸”æ”¯æŒé€»è¾‘åµŒå¥—,è€Œä¸åƒ:    FGameplayTagé™å®šäº†åªèƒ½ç”¨1ä¸ªtag(è™½ç„¶é™¤äº†æœ¬èº«,ä¹Ÿå¯ä»¥ç”¨äºåŒ¹é…çˆ¶çº§tag)   FGameplayTagContaineråªæœ‰æœ‰é™çš„åŒ¹é…é€»è¾‘(ä¸,æˆ–,éä¸­çš„å“ªç§åŒ¹é…é€»è¾‘,å–å†³äºä»£ç å¦‚ä½•ä½¿ç”¨)   FGameplayTagRequirementsåœ¨æœªåŠ å…¥FGameplayTagRequirements::TagQueryæˆå‘˜ä¹‹å‰,å®ƒåªæœ‰ä¸¤ä¸ªFGameplayTagContaineræˆå‘˜,å¯¹åº”äº†â€ä¸â€,â€éâ€çš„åŒ¹é…é€»è¾‘,ä¾ç„¶æœ‰é™(åœ¨TagQueryæˆå‘˜åŠ å…¥çš„æ”¹åŠ¨ä¹‹å,å¯ä»¥ç”¨FGameplayTagRequirements::ConvertTagFieldsToTagQueryè·å¾—ä¸¤ä¸ªtag containeré€»è¾‘åˆå¹¶ä¹‹åçš„Queryå¯¹è±¡)   FGameplayTagQueryåŸç†  æ•°æ®ç»“æ„          TokenStreamVersion ç‰ˆæœ¬å·,ä¿ç•™æ•°æ®ä»¥ä¾¿äºå¤„ç†åç»­å¯èƒ½çš„å®ç°æ–¹å¼å˜æ›´,å¯¹åº”æšä¸¾ç±»å‹EGameplayTagQueryStreamVersion           TagDictionary å»é‡åçš„tagæ•°ç»„,æ¥è‡ªäºé€»è¾‘è¡¨è¾¾å¼ä¸­éœ€è¦ç”¨åˆ°çš„tag           QueryTokenStream ä¸€ç»„å…ƒæ•°æ®,å­˜å‚¨äº†ç‰ˆæœ¬å·(å†—ä½™å­˜å‚¨),æ˜¯å¦æœ‰é€»è¾‘è¡¨è¾¾å¼è¡¨è¾¾å¼,é€»è¾‘è¡¨è¾¾å¼ç±»å‹,ç”¨åˆ°çš„tagæ•°é‡,ä»¥åŠæ¯ä¸ªç”¨åˆ°çš„tagåœ¨TagDictionaryä¸­çš„ä¸‹æ ‡.æ˜¯å®ç°å†…å­˜ç´§å‡‘å’Œæ€§èƒ½é«˜æ•ˆçš„å…³é”®           UserDescription å­—ç¬¦ä¸²,è‡ªå®šä¹‰çš„æè¿°ä¿¡æ¯           AutoDescription å­—ç¬¦ä¸²,è‡ªåŠ¨ç”Ÿæˆçš„æè¿°ä¿¡æ¯      ç”Ÿæˆæ–¹å¼  ä½¿ç”¨C++æ„é€ queryå¯¹è±¡  ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„API,æ¥è¿›è¡Œé€»è¾‘è¡¨è¾¾å¼çš„æ„å»º: \tFGameplayTagQuery TagQuery; \tconst FGameplayTagContainer TagContainerA{}; \tconst FGameplayTagContainer TagContainerB{}; \tconst FGameplayTag TagC{};  \tTagQuery.Build(FGameplayTagQueryExpression().AllExprMatch() \t\t.AddExpr(FGameplayTagQueryExpression().AnyTagsMatch().AddTags(TagContainerA)) \t\t.AddExpr(FGameplayTagQueryExpression().NoExprMatch() \t\t\t\t.AddExpr(FGameplayTagQueryExpression().NoTagsMatch().AddTags(TagContainerB)) \t\t\t\t.AddExpr(FGameplayTagQueryExpression().AnyTagsMatch().AddTag(TagC))), FString{TEXTVIEW(\"Test Logic\")});      // éšä¾¿å†™çš„é€»è¾‘,ä¸å»ºè®®å°è¯•ç†è§£å®ƒ     // æˆ‘ç”¨ç¼©è¿›å±‚çº§è¡¨ç¤ºåµŒå¥—å±‚çº§,æ¯å±‚ä¸­çš„ä¸€è¡Œå®šä¹‰äº†ä¸€ä¸ªé€»è¾‘è¡¨è¾¾å¼   FGameplayTagQuery::Buildç®€ç•¥æµç¨‹:    å†™å…¥ç‰ˆæœ¬å·å’Œç”¨æˆ·æè¿°ä¿¡æ¯,é‡ç½®å…³é”®æ•°æ®   å¯¹QueryTokenStreamçš„ç¬¬0å’Œ1å·å…ƒç´ å†™å…¥â€ç‰ˆæœ¬å·â€å’Œâ€æ˜¯å¦å«æœ‰é€»è¾‘è¡¨è¾¾å¼â€çš„ä¿¡æ¯   å¯¹é€»è¾‘è¡¨è¾¾å¼è¿›è¡Œè§£æ,åœ¨QueryTokenStreamä¸­å†™å…¥è¡¨è¾¾å¼ç±»å‹çš„æšä¸¾,å¯¹åº”EGameplayTagQueryExprType,å¯¹äºâ€éåµŒå¥—è¡¨è¾¾å¼â€ç±»å‹,å†™å…¥å®ƒç”¨åˆ°çš„tagæ•°é‡,å°†æ¯ä¸ªtagå»é‡æ·»åŠ åˆ°TagDictionary,å¹¶å†™å…¥ä¸‹æ ‡;å¯¹äºâ€åµŒå¥—è¡¨è¾¾å¼â€ç±»å‹,é€’å½’è§£æ   ç®€å•æ¥è¯´,Buildæµç¨‹ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†å°†æ ‘å½¢ç»“æ„çš„é€»è¾‘è¡¨è¾¾å¼,å¹³é“ºæˆäº†æ•°ç»„.  ä½¿ç”¨ç¼–è¾‘å™¨æ„é€ queryå¯¹è±¡  åº•å±‚é€»è¾‘ä¸ä½¿ç”¨C++æ„é€ ä¸€è‡´,åªä¸è¿‡ç”±äºFGameplayTagQueryExpressionä¸æ˜¯USTRUCT,ä»¥åŠå½“æ—¶InstancedStructè¿˜æ²¡è¯ç”Ÿ,æ‰€ä»¥å¯¹å®ƒç”¨UObjectâ€é•œåƒâ€äº†ä¸€é(ä¸ªäººçŒœæµ‹),æ‰€ä»¥æœ‰äº†UEditableGameplayTagQueryExpressionä»¥åŠç›¸å…³ç±»å‹,ä»¥æ”¯æŒç¼–è¾‘æ—¶çš„è¡¨è¾¾å¼åµŒå¥—,æä¾›äº†æ›´å¥½çš„è°ƒè¯•ä¿¡æ¯,å‚ç…§FGameplayTagQuery::BuildFromEditableQuery  FGameplayTagQuery::Matches, æ£€éªŒé€»è¾‘è¡¨è¾¾å¼  ä½¿ç”¨äº†è¾…åŠ©ç±»å‹FQueryEvaluator,æŒæœ‰TagQueryçš„ä¸å¯å˜å¼•ç”¨,è®°å½•å½“å‰å…ƒæ•°æ®ä¸‹æ ‡å’Œæ£€æµ‹æ˜¯å¦æœ‰è¯»å–é”™è¯¯.æ ¹æ®è¯»å–åˆ°çš„è¡¨è¾¾å¼ç±»å‹,æ‰§è¡Œå¯¹åº”çš„é€»è¾‘åˆ¤å®š.æ¯æ¬¡è¯»å–å…ƒæ•°æ®éƒ½ä¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨è¯»å–é”™è¯¯.å‚ç…§FQueryEvaluator::EvalExpr  ç»“è¯­ æ„Ÿè§‰FGameplayTagQueryçš„å®ç°æ¯”è¾ƒå·§å¦™,æä¾›äº†å¼ºå¤§çš„åŒ¹é…é€»è¾‘,é€‚åˆä»»æ„éœ€è¦TagåŒ¹é…åŠŸèƒ½çš„éœ€æ±‚,ä¸è¿‡å…¶ä¸­çš„ç¼–è¾‘å™¨é€»è¾‘å­˜åœ¨ä»£ç é‡å¤,ä¸å¤Ÿä¼˜é›…,ä»¥åŠå¯¹è¯»å–é”™è¯¯çš„æ£€æµ‹å¹¶ä¸ä¸¥è°¨,åç»­é¢‘ç¹çš„æ£€æµ‹ä¹Ÿå°±ä¸å¤ªå¿…è¦äº†.ä½†æ€»ä½“ä¸Šç‘•ä¸æ©ç‘œ"
  },
  
  {
    "title": "ä¸€ç§æŠŠå¤šä¸ªè™šå¹»å·¥ç¨‹è§£å†³æ–¹æ¡ˆåˆè€Œä¸ºä¸€çš„æ–¹æ³•",
    "url": "/posts/A-way-to-combine-multiple-unreal-projects-into-one/",
    "categories": "Unreal Engine",
    "tags": "tooling",
    "date": "2022-06-05 11:15:13 +0800",
    "content": "ä½¿ç”¨å¼•æ“ç›®å½•çš„GenerateProjectFiles.batå’Œ.uprojectdirsæ–‡ä»¶     é¦–å…ˆå‚è€ƒDefault.uprojectdirsæ–‡ä»¶ä¸­çš„æ³¨é‡Š   æ–°å»ºmy.uprojectdirsæˆ–ç›´æ¥ä¿®æ”¹Default.uprojectdirsæ–‡ä»¶,å¹¶å†™å…¥ä¾‹å¦‚Project/   æ­¤æ—¶è¿è¡ŒGenerateProjectFiles.batç”Ÿæˆè§£å†³æ–¹æ¡ˆæ—¶,ä¼šé¢å¤–ä»å¼•æ“ç›®å½•/Projectç›®å½•ä¸‹çš„1çº§å­ç›®å½•å¯»æ‰¾è™šå¹»å·¥ç¨‹ç›®å½•, ä¾‹å¦‚UnrealEngine/Project/LyraGame   å®Œæˆ      å› ä¸º.uprojectdirsæ–‡ä»¶ä¸­åªæ”¯æŒæŒ‡å®šå­ç›®å½•,è‹¥æƒ³è¦å¤–éƒ¨ç›®å½•çš„å·¥ç¨‹ä¹Ÿè¢«åŒ…å«è¿›è§£å†³æ–¹æ¡ˆæ–‡ä»¶,å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„symbol-linkåŠŸèƒ½       å·²åºŸå¼ƒæ–¹æ³•    åˆè¡·    å› ä¸ºå·¥ä½œ,å­¦ä¹ çš„åŸå› ,æˆ‘æœ¬åœ°ä¼šæœ‰å¤šä¸ªè™šå¹»å·¥ç¨‹,å¹¶ä¸”å®ƒä»¬å…±ç”¨äº†åŒä¸€ä¸ªå¼•æ“    å®ƒä»¬çš„å·¥ç¨‹æ–‡ä»¶é»˜è®¤éƒ½æ˜¯ç”±UBT(Unreal Build Tool)ç”Ÿæˆçš„,ç‹¬ç«‹çš„è§£å†³æ–¹æ¡ˆæ–‡ä»¶    è¿™ç»™æˆ‘å¸¦æ¥çš„ä¸€äº›é—®é¢˜:                ç”±äºæ‰“å¼€è§£å†³æ–¹æ¡ˆçš„æˆæœ¬è¾ƒé«˜,åŒæ—¶æ‰“å¼€å¤šä¸ªè§£å†³æ–¹æ¡ˆæ—¶çš„ç­‰å¾…æ—¶é—´,å†…å­˜å ç”¨å¯èƒ½éƒ½æ˜¯æˆå€å¢åŠ çš„                 åœ¨IDEæŠ½é£,æˆ–è€…å¼•æ“ä»£ç æ›´æ–°è€Œè§¦å‘ç¬¦å·é‡æ–°è§£æçš„æ—¶å€™,ç­‰å¾…æ—¶é—´å°‘åˆ™15åˆ†é’Ÿèµ·æ­¥,é‚£å«ä¸€ä¸ªæŠ˜ç£¨            æˆ‘è®¤ä¸ºä¸åŒè§£å†³æ–¹æ¡ˆä¸­,ç‰©ç†è·¯å¾„ç›¸åŒçš„å·¥ç¨‹,åº”è¯¥è§†ä¸ºåŒä¸€ä¸ªå·¥ç¨‹,è™šå¹»å¼•æ“çš„å·¥ç¨‹ä¸åº”è¯¥åœ¨æ¯ä¸ªè§£å†³æ–¹æ¡ˆéƒ½é‡æ–°è§£æä¸€é    ä½†ç›®å‰ç”¨è¿‡çš„Riderå’ŒVisual Studio(å®‡å®™ç¬¬ä¸€IDE)éƒ½æ˜¯ä¼šåœ¨æ¯ä¸ªè§£å†³æ–¹æ¡ˆä¸­é‡æ–°è§£æä¸€é.éå¸¸æŠ˜ç£¨,å…¶ä¸­åŸç”±,ä»¤äººè´¹è§£,å¸Œæœ›èƒ½æœ‰å¤§ä½¬å‘ŠçŸ¥ä¸€ä¸‹    éœ€æ±‚    æ‰€ä»¥æˆ‘å°±åœ¨æƒ³,æ—¢ç„¶è¿™äº›ä¸ªIDEè¿™ä¹ˆâ€æ„šç¬¨â€,é ä¸ä½,é‚£æˆ‘èƒ½å¦æ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•,æ‰‹åŠ¨æŠŠå¤šä¸ªè§£å†³æ–¹æ¡ˆåˆæˆä¸€ä¸ªå‘¢?    æ­¥éª¤    ä¸‹é¢åˆ†äº«çš„æ˜¯,æˆ‘ä½¿ç”¨Rideræ—¶çš„æ“ä½œæ­¥éª¤:                åœ¨æƒ³è¦å¤šå¼€çš„è§£å†³æ–¹æ¡ˆä¸­,éšæ„é€‰æ‹©ä¸€ä¸ªä½œä¸ºâ€ä¸»è§£å†³æ–¹æ¡ˆâ€œ,å¹¶æ‰“å¼€                 æ·»åŠ å…¶å®ƒå·¥ç¨‹æ–‡ä»¶                        åœ¨Explorerè§£å†³æ–¹æ¡ˆæµè§ˆå™¨ä¸­,å³é”®ä»»æ„å·¥ç¨‹æ–‡ä»¶å¤¹,æ¯”å¦‚Games,é€‰æ‹©Add,Add Existing Project...,ç„¶åé€‰æ‹©ç›¸å…³çš„å·¥ç¨‹æ–‡ä»¶                 å‡å¦‚è¦æ·»åŠ çš„å·¥ç¨‹æ˜¯LyraStarterGame,é‚£ä¹ˆå®ƒçš„å·¥ç¨‹æ–‡ä»¶åº”è¯¥ä½äºLyraStarterGame_Folder\\\\Intermediate\\\\ProjectFiles\\\\LyraStarterGame.vcxproj                 åœ¨â€è§£å†³æ–¹æ¡ˆé…ç½®â€ä¸­,ä¿®æ”¹åˆšåˆšæ·»åŠ çš„å·¥ç¨‹çš„é…ç½®                   ç‚¹å‡»å³ä¸Šè§’çš„å·¥å…·æ ä¸­çš„DebugGameEditor | Win64æŒ‰é’®(è¿™æ˜¯æˆ‘çš„è§£å†³æ–¹æ¡ˆç¼–è¯‘é…ç½®,æ ¹æ®ä½ çš„å®é™…æƒ…å†µ,æ–‡å­—ä¼šæœ‰æ‰€ä¸åŒ),ç„¶åé€‰æ‹©Edit Solution Comfigurations...                 æ‰¾åˆ°åˆšåˆšæ·»åŠ çš„å·¥ç¨‹,å¯ä»¥çœ‹åˆ°å®ƒä»¬å½“å‰éƒ½æ˜¯é»˜è®¤çš„é…ç½®,å¯èƒ½æ˜¯DebugClient | Arm64ä»€ä¹ˆçš„,æŠŠå®ƒæ”¹æˆä½ éœ€è¦çš„é…ç½®,ä¸€èˆ¬æ˜¯ä¸è§£å†³æ–¹æ¡ˆç¼–è¯‘é…ç½®ä¸€è‡´                 ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶å‚æ•°                   å›åˆ°Explorerè§£å†³æ–¹æ¡ˆæµè§ˆå™¨                 å³é”®åˆšåˆšæ·»åŠ çš„å·¥ç¨‹(è¿™é‡Œæˆ‘æ‹¿LyraStarterGameä¸¾ä¾‹),é€‰æ‹©Edit,Edit LyraStarterGame.vcxproj                 å°†LyraStarterGame.vcxprojæ–‡ä»¶ä¸­æ‰€æœ‰$(SolutionDir)æ›¿æ¢ä¸º$(ProjectDir)..\\\\..\\\\ ($(SolutionDir)æ˜¯å½“å‰è§£å†³æ–¹æ¡ˆçš„æ ¹ç›®å½•,$(ProjectDir)æ˜¯å½“å‰å·¥ç¨‹çš„å·¥ç¨‹æ–‡ä»¶æ‰€åœ¨ç›®å½•,å³LyraStarterGame_Folder\\\\Intermediate\\\\ProjectFiles\\\\,æ‰€ä»¥è¿™é‡Œä½¿ç”¨ä¸¤æ¬¡..\\\\,è·å¾—äº†å½“å‰å·¥ç¨‹çš„æ ¹ç›®å½•)                 å¦‚æœä¸æƒ³ä¸€æ¬¡æ€§å…¨éƒ½æ›¿æ¢,ä¹Ÿå¯ä»¥æœç´¢ä½ çš„â€ç¼–è¯‘é…ç½®â€œ,æ¯”å¦‚ DebugGame_Editor|x64,æ‰¾åˆ°å¯¹åº”ç¼–è¯‘é…ç½®çš„ç›¸å…³é…ç½®,åªæ›¿æ¢ä¸‰ä¸ªNMakeç›¸å…³çš„å‘½ä»¤è¡Œä¸­çš„æ–‡æœ¬,ä½†å¯èƒ½ä¼šå­˜åœ¨å·¥ç¨‹æ–‡ä»¶æ— æ³•æ­£å¸¸è§£æç¬¦å·çš„é—®é¢˜:æ¯”å¦‚Switch Header/SourceåŠŸèƒ½æ— æ³•ä½¿ç”¨,è¯­æ³•ç€è‰²å¤±æ•ˆç­‰,å¦‚é‡åˆ°é—®é¢˜,è¿›è¡Œå…¨é‡æ›¿æ¢å³å¯            ä¸è¶³    æ¯æ¬¡é€šè¿‡UBTé‡æ–°ç”Ÿæˆè§£å†³æ–¹æ¡ˆæ–‡ä»¶æ—¶,ç›¸å…³çš„å·¥ç¨‹æ–‡ä»¶ä¼šè¢«è¦†ç›–,ä¸Šé¢çš„æ“ä½œéœ€è¦é‡æ–°æ‰§è¡Œä¸€æ¬¡.å¦‚æœèƒ½æœ‰IDEçš„æ”¯æŒ,æˆ–è€…è‡ªåŠ¨åŒ–çš„å·¥å…·å°±å¥½äº†"
  }
  
]

